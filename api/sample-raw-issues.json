[
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1939",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1939/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1939/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1939/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1939",
    "id": 1223817290,
    "node_id": "I_kwDOAqHbmM5I8fhK",
    "number": 1939,
    "title": "Kill-then-download strategy isn't killing the containers with BALENA_SUPERVISOR_UPDATE_STRATEGY",
    "user": {
      "login": "vipulgupta2048",
      "id": 22801822,
      "node_id": "MDQ6VXNlcjIyODAxODIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/22801822?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vipulgupta2048",
      "html_url": "https://github.com/vipulgupta2048",
      "followers_url": "https://api.github.com/users/vipulgupta2048/followers",
      "following_url": "https://api.github.com/users/vipulgupta2048/following{/other_user}",
      "gists_url": "https://api.github.com/users/vipulgupta2048/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vipulgupta2048/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vipulgupta2048/subscriptions",
      "organizations_url": "https://api.github.com/users/vipulgupta2048/orgs",
      "repos_url": "https://api.github.com/users/vipulgupta2048/repos",
      "events_url": "https://api.github.com/users/vipulgupta2048/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vipulgupta2048/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2022-05-03T08:27:17Z",
    "updated_at": "2022-05-03T13:45:58Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Customer reported on a RPi zero 2 the call to kill the service comes after the image is downloaded when using `BALENA_SUPERVISOR_UPDATE_STRATEGY=kill-then-download` but when the `RESIN_SUPERVISOR_UPDATE_STRATEGY=kill-then-download` is used then everything works as expected. \r\n\r\n- SV version ??\r\n- balenaOS version ?? (Yet to be updated)\r\n\r\nSteps to reproduce: \r\n\r\n1. Set app's BALENA_SUPERVISOR_UPDATE_STRATEGY to delete-then-download\r\n2. Pinning the device to a different release\r\n3. Observed the logs below\r\n\r\nThe first two log lines are output from the running container. The line at (14:54:04) shows that the next release downloaded started. The call to kill the service isn't logged until line five (14:56:34), after the image has been downloaded (14:56:33).\r\n\r\n\r\n```\r\n27.04.22 14:53:50 (-0400)  api  ======== Running on http://0.0.0.0:80 ========\r\n27.04.22 14:53:50 (-0400)  api  (Press CTRL+C to quit)\r\n27.04.22 14:54:04 (-0400) Downloading delta for image 'registry2.balena-cloud.com/v2/d42ffa7e55694652a7e02eb37ab50a82@sha256:bf0124ff6d15aa698a6a4a3ded5f690b2fcbf44cc1e4151995f97aa591ff8a26'\r\n27.04.22 14:56:33 (-0400) Downloaded image 'registry2.balena-cloud.com/v2/d42ffa7e55694652a7e02eb37ab50a82@sha256:bf0124ff6d15aa698a6a4a3ded5f690b2fcbf44cc1e4151995f97aa591ff8a26'\r\n27.04.22 14:56:34 (-0400) Killing service 'api sha256:f739d5f084b14b4e4a022ee1bcc46832b8be7350f25d03d8fc8fa46514927010'\r\n27.04.22 14:56:46 (-0400) Service exited 'api sha256:f739d5f084b14b4e4a022ee1bcc46832b8be7350f25d03d8fc8fa46514927010'\r\n27.04.22 14:56:47 (-0400) Killed service 'api sha256:f739d5f084b14b4e4a022ee1bcc46832b8be7350f25d03d8fc8fa46514927010'\r\n27.04.22 14:56:48 (-0400) Deleting image 'registry2.balena-cloud.com/v2/c8544ad2ec434346a4a8e31d69e213f9@sha256:412ffbd48828a95b21d7a6a65e7469c0bbdcd721e75740beb9eda6876d16c489'\r\n27.04.22 14:57:04 (-0400) Deleted image 'registry2.balena-cloud.com/v2/c8544ad2ec434346a4a8e31d69e213f9@sha256:412ffbd48828a95b21d7a6a65e7469c0bbdcd721e75740beb9eda6876d16c489'\r\n27.04.22 14:57:05 (-0400) Installing service 'api sha256:5d8bfcb99a1e2d655c6c7da2bebecf5aab4a3795cc5b610068e6e465694d2307'\r\n27.04.22 14:57:07 (-0400) Installed service 'api sha256:5d8bfcb99a1e2d655c6c7da2bebecf5aab4a3795cc5b610068e6e465694d2307'\r\n27.04.22 14:57:07 (-0400) Starting service 'api sha256:5d8bfcb99a1e2d655c6c7da2bebecf5aab4a3795cc5b610068e6e465694d2307'\r\n27.04.22 14:57:09 (-0400) Started service 'api sha256:5d8bfcb99a1e2d655c6c7da2bebecf5aab4a3795cc5b610068e6e465694d2307'\r\n```\r\n\r\n4. Set `RESIN_SUPERVISOR_UPDATE_STRATEGY=kill-then-download\r\n5. Repin the release \r\n6. Logs the customer observed now\r\n\r\nKilling first then downloading as expected.\r\n\r\n```\r\n27.04.22 16:08:28 (-0400)  api  ======== Running on http://0.0.0.0:80 ========\r\n27.04.22 16:08:28 (-0400)  api  (Press CTRL+C to quit)\r\n27.04.22 16:08:39 (-0400) Killing service 'api sha256:d07224f598b3340b4d8aff35a5cf703fd4cc2b62eccc4747f582664ace3cd802'\r\n27.04.22 16:08:51 (-0400) Service exited 'api sha256:d07224f598b3340b4d8aff35a5cf703fd4cc2b62eccc4747f582664ace3cd802'\r\n27.04.22 16:08:51 (-0400) Killed service 'api sha256:d07224f598b3340b4d8aff35a5cf703fd4cc2b62eccc4747f582664ace3cd802'\r\n27.04.22 16:08:52 (-0400) Downloading delta for image 'registry2.balena-cloud.com/v2/d42ffa7e55694652a7e02eb37ab50a82@sha256:bf0124ff6d15aa698a6a4a3ded5f690b2fcbf44cc1e4151995f97aa591ff8a26'\r\n27.04.22 16:10:48 (-0400) Downloaded image 'registry2.balena-cloud.com/v2/d42ffa7e55694652a7e02eb37ab50a82@sha256:bf0124ff6d15aa698a6a4a3ded5f690b2fcbf44cc1e4151995f97aa591ff8a26'\r\n27.04.22 16:10:50 (-0400) Deleting image 'registry2.balena-cloud.com/v2/6124c6e4e354be2d11ea065ee8123bb6@sha256:5b4489134e8b241cf2653e739b8cac7120f713ea7d274fd47b46a3c801f070df'\r\n27.04.22 16:10:56 (-0400) Deleted image 'registry2.balena-cloud.com/v2/6124c6e4e354be2d11ea065ee8123bb6@sha256:5b4489134e8b241cf2653e739b8cac7120f713ea7d274fd47b46a3c801f070df'\r\n27.04.22 16:10:57 (-0400) Installing service 'api sha256:5d8bfcb99a1e2d655c6c7da2bebecf5aab4a3795cc5b610068e6e465694d2307'\r\n27.04.22 16:10:58 (-0400) Installed service 'api sha256:5d8bfcb99a1e2d655c6c7da2bebecf5aab4a3795cc5b610068e6e465694d2307'\r\n27.04.22 16:10:58 (-0400) Starting service 'api sha256:5d8bfcb99a1e2d655c6c7da2bebecf5aab4a3795cc5b610068e6e465694d2307'\r\n27.04.22 16:11:00 (-0400) Started service 'api sha256:5d8bfcb99a1e2d655c6c7da2bebecf5aab4a3795cc5b610068e6e465694d2307'\r\n```\r\n\r\n## Possiblities\r\n\r\n- Possible similar issue #1233\r\n- Probably could be a case of that SV version not supporting `BALENA_*` config yet but that doesn't seem like it since the Zero 2 is a considerably new device which should be running a newer version of the SV. \r\n- If not, and there's actually a SV version out there which doesn't respect `BALENA_*` then please do update the documentation with the version cutoff point here https://www.balena.io/docs/learn/deploy/release-strategy/update-strategies/\r\n- From what I remember I think we account for both configuration variant so not sure why this is happening. ",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1939/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1934",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1934/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1934/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1934/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1934",
    "id": 1212766396,
    "node_id": "I_kwDOAqHbmM5ISVi8",
    "number": 1934,
    "title": "Do not report unique local IPv6 addresses on the current state",
    "user": {
      "login": "pipex",
      "id": 1822826,
      "node_id": "MDQ6VXNlcjE4MjI4MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1822826?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipex",
      "html_url": "https://github.com/pipex",
      "followers_url": "https://api.github.com/users/pipex/followers",
      "following_url": "https://api.github.com/users/pipex/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipex/subscriptions",
      "organizations_url": "https://api.github.com/users/pipex/orgs",
      "repos_url": "https://api.github.com/users/pipex/repos",
      "events_url": "https://api.github.com/users/pipex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipex/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-04-22T20:50:07Z",
    "updated_at": "2022-04-22T20:50:47Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Related to #1906 (see [this comment](https://github.com/balena-os/balena-supervisor/issues/1906#issuecomment-1077723408) in particular).\r\n\r\n> IPv6 ULA (Unique Local Address) RFC4193 are to IPv6 what [RFC 1918](https://en.wikipedia.org/wiki/Private_network) are to IPv4. ",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1934/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1934/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1933",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1933/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1933/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1933/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1933",
    "id": 1211360744,
    "node_id": "I_kwDOAqHbmM5IM-Xo",
    "number": 1933,
    "title": "Supervisor should use volume long syntax for labels",
    "user": {
      "login": "cywang117",
      "id": 38748558,
      "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cywang117",
      "html_url": "https://github.com/cywang117",
      "followers_url": "https://api.github.com/users/cywang117/followers",
      "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
      "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
      "organizations_url": "https://api.github.com/users/cywang117/orgs",
      "repos_url": "https://api.github.com/users/cywang117/repos",
      "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cywang117/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "cywang117",
      "id": 38748558,
      "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cywang117",
      "html_url": "https://github.com/cywang117",
      "followers_url": "https://api.github.com/users/cywang117/followers",
      "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
      "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
      "organizations_url": "https://api.github.com/users/cywang117/orgs",
      "repos_url": "https://api.github.com/users/cywang117/repos",
      "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cywang117/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "cywang117",
        "id": 38748558,
        "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
        "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cywang117",
        "html_url": "https://github.com/cywang117",
        "followers_url": "https://api.github.com/users/cywang117/followers",
        "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
        "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
        "organizations_url": "https://api.github.com/users/cywang117/orgs",
        "repos_url": "https://api.github.com/users/cywang117/repos",
        "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
        "received_events_url": "https://api.github.com/users/cywang117/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-04-21T17:45:41Z",
    "updated_at": "2022-04-21T18:37:34Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Short vs long syntax: https://docs.docker.com/compose/compose-file/compose-file-v2/#volumes\r\n\r\nCurrently, balena-compose-parse supports version 2.4, but everywhere else still does not. Per https://github.com/balena-os/balena-supervisor/pull/1780, we want to move to using Mounts instead of Binds, to avoid instances of https://github.com/balena-os/balena-supervisor/issues/1231. In [addFeaturesFromLabels](https://github.com/balena-os/balena-supervisor/blob/104a8006fbab4bad0f2da923eade0e64002dd59f/src/compose/utils.ts#L321), we add volumes derived from balena's docker-compose labels with the short syntax only. We should use the long syntax here instead, since some labels involve bind mounts to a socket. This will require adding support for long syntax.\r\n\r\nThis will allow us to distinguish between labels that should use the long syntax (Mounts API), and internal bind mounts that should stay with using the short syntax. The latter is namely for update locks:\r\n```\r\n/tmp/balena-supervisor/services/$APP_ID/$SERVICE_NAME:/tmp/balena\r\n/tmp/balena-supervisor/services/$APP_ID/$SERVICE_NAME:/tmp/resin\r\n```\r\nwhich should remain as the short syntax, since bind mounts using HostConfig.Binds config auto-creates the directory on host if it does not exist, and /tmp directories will not exist following device reboots.\r\n\r\nFlowdock: https://www.flowdock.com/app/rulemotion/r-supervisor/threads/6b66VzeJZynWcuevc4tuvCEaOrC",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1933/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1932",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1932/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1932/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1932/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1932",
    "id": 1210162498,
    "node_id": "I_kwDOAqHbmM5IIZ1C",
    "number": 1932,
    "title": "Firewall rules for local-mode are not applied on first boot",
    "user": {
      "login": "klutchell",
      "id": 20458272,
      "node_id": "MDQ6VXNlcjIwNDU4Mjcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/20458272?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klutchell",
      "html_url": "https://github.com/klutchell",
      "followers_url": "https://api.github.com/users/klutchell/followers",
      "following_url": "https://api.github.com/users/klutchell/following{/other_user}",
      "gists_url": "https://api.github.com/users/klutchell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klutchell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klutchell/subscriptions",
      "organizations_url": "https://api.github.com/users/klutchell/orgs",
      "repos_url": "https://api.github.com/users/klutchell/repos",
      "events_url": "https://api.github.com/users/klutchell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klutchell/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-04-20T20:09:16Z",
    "updated_at": "2022-04-21T14:04:04Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "When booting an unmanaged development image, it appears from the logs that local mode is enabled but the iptables rules are not allowing external network traffic to port 48484.\r\n\r\nReproduced with balenaOS 2.95.8 and supervisor v12.11.38.\r\n\r\nThis doesn't seem to be 100% reproducible, but I've seen it twice now so maybe we are looking for a race condition?\r\n\r\n```\r\nID=\"balena-os\"\r\nNAME=\"balenaOS\"\r\nVERSION=\"2.95.8\"\r\nVERSION_ID=\"2.95.8\"\r\nPRETTY_NAME=\"balenaOS 2.95.8\"\r\nMACHINE=\"raspberrypi4-64\"\r\nMETA_BALENA_VERSION=\"2.95.8\"\r\nBALENA_BOARD_REV=\"91ad4e1\"\r\nMETA_BALENA_REV=\"133b50d2\"\r\nSLUG=\"raspberrypi4-64\"\r\n```\r\n\r\n**supervisor logs first boot**\r\n\r\n```\r\nApr 20 19:32:05 6eeb32d balena-supervisor[2028]: Error response from daemon: No such container: resin_supervisor\r\nApr 20 19:32:06 6eeb32d balena-supervisor[2043]: Error response from daemon: No such container: balena_supervisor\r\nApr 20 19:32:06 6eeb32d balena-supervisor[2060]: active\r\nApr 20 19:32:07 6eeb32d balena-supervisor[2100]: Error: No such object: balena_supervisor\r\nApr 20 19:32:08 6eeb32d balena-supervisor[2151]: WARNING: The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [info]    Supervisor v12.11.38 starting up...\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [info]    Setting host to discoverable\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [warn]    Invalid firewall mode: . Reverting to state: off\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [info]    Applying firewall mode: off\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Starting systemd unit: avahi-daemon.service\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Starting systemd unit: avahi-daemon.socket\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Starting logging infrastructure\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Performing database cleanup for container log timestamps\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [info]    Starting up in unmanaged mode, activating local mode\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [info]    Switching logging backend to LocalLogBackend\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [info]    Starting firewall\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Storing engine snapshot in the database. Timestamp: 2022-04-20T19:32:13.751Z\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [success] Firewall mode applied\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Starting api binder\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: (node:1) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Unmanaged mode is set, skipping API client initialization\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [event]   Event: Supervisor start {}\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Connectivity check enabled: true\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   No API endpoint specified, skipping connectivity check\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Starting periodic check for IP addresses\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Handling of local mode switch is completed\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [success] Initialised splash image backend\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [info]    Reporting initial state, supervisor version and API info\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [info]    Attempting to load any preloaded applications\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [debug]   Migrated existing apps.json\r\nApr 20 19:32:13 6eeb32d balena-supervisor[2151]: [info]    Starting API server\r\nApr 20 19:32:14 6eeb32d balena-supervisor[2151]: [info]    Supervisor API successfully started on port 48484\r\nApr 20 19:32:14 6eeb32d balena-supervisor[2151]: [info]    Unmanaged mode is set, skipping API binder initialization\r\nApr 20 19:32:14 6eeb32d balena-supervisor[2151]: [debug]   Spawning journald with: chroot  /mnt/root journalctl -a --follow -o json _SYSTEMD_UNIT=balena.service\r\nApr 20 19:37:10 6eeb32d balena-supervisor[2151]: [api]     GET /v1/healthy 200 - 13.443 ms\r\n```\r\n\r\n**iptables first boot**\r\n```\r\n$ iptables -L BALENA-FIREWALL -v\r\nChain BALENA-FIREWALL (1 references)\r\n pkts bytes target     prot opt in     out     source               destination         \r\n  138 14358 ACCEPT     all  --  any    any     anywhere             anywhere             state RELATED,ESTABLISHED\r\n    2   120 ACCEPT     all  --  any    any     anywhere             anywhere             ADDRTYPE match src-type LOCAL\r\n    0     0 ACCEPT     tcp  --  resin-vpn any     anywhere             anywhere             tcp dpt:48484\r\n    0     0 ACCEPT     tcp  --  tun0   any     anywhere             anywhere             tcp dpt:48484\r\n    0     0 ACCEPT     tcp  --  docker0 any     anywhere             anywhere             tcp dpt:48484\r\n    0     0 ACCEPT     tcp  --  lo     any     anywhere             anywhere             tcp dpt:48484\r\n    0     0 ACCEPT     tcp  --  supervisor0 any     anywhere             anywhere             tcp dpt:48484\r\n    0     0 REJECT     tcp  --  any    any     anywhere             anywhere             tcp dpt:48484 reject-with icmp-port-unreachable\r\n    2   120 ACCEPT     tcp  --  any    any     anywhere             anywhere             tcp dpt:22222\r\n    0     0 ACCEPT     tcp  --  any    any     anywhere             anywhere             tcp dpt:2375\r\n  602  191K ACCEPT     all  --  any    any     anywhere             anywhere             ADDRTYPE match dst-type MULTICAST\r\n    0     0 ACCEPT     icmp --  any    any     anywhere             anywhere            \r\n    0     0 ACCEPT     udp  --  balena0 any     anywhere             anywhere             udp dpt:domain\r\n  201  8152 RETURN     all  --  any    any     anywhere             anywhere            \r\n    0     0 REJECT     all  --  any    any     anywhere             anywhere             reject-with icmp-port-unreachable\r\n```\r\n\r\n```bash\r\ncurl http://192.168.1.120:48484/ping\r\ncurl: (7) Failed to connect to 192.168.1.120 port 48484: Connection refused\r\n```\r\n\r\n**iptables second boot**\r\n```\r\n$ iptables -L BALENA-FIREWALL -v\r\nChain BALENA-FIREWALL (1 references)\r\n pkts bytes target     prot opt in     out     source               destination         \r\n   41  7886 ACCEPT     all  --  any    any     anywhere             anywhere             state RELATED,ESTABLISHED\r\n    0     0 ACCEPT     all  --  any    any     anywhere             anywhere             ADDRTYPE match src-type LOCAL\r\n    0     0 ACCEPT     tcp  --  any    any     anywhere             anywhere             tcp dpt:48484\r\n    0     0 REJECT     tcp  --  any    any     anywhere             anywhere             tcp dpt:48484 reject-with icmp-port-unreachable\r\n    2   120 ACCEPT     tcp  --  any    any     anywhere             anywhere             tcp dpt:22222\r\n    0     0 ACCEPT     tcp  --  any    any     anywhere             anywhere             tcp dpt:2375\r\n   16  5040 ACCEPT     all  --  any    any     anywhere             anywhere             ADDRTYPE match dst-type MULTICAST\r\n    0     0 ACCEPT     icmp --  any    any     anywhere             anywhere            \r\n    0     0 ACCEPT     udp  --  balena0 any     anywhere             anywhere             udp dpt:domain\r\n    8   336 RETURN     all  --  any    any     anywhere             anywhere            \r\n    0     0 REJECT     all  --  any    any     anywhere             anywhere             reject-with icmp-port-unreachable\r\n```\r\n\r\n```bash\r\ncurl http://192.168.1.120:48484/ping\r\nOK\r\n```\r\n\r\nI'm still investigating, I just wanted a record of my discoveries so far in case it's a known issue.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1932/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1930",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1930/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1930/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1930/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1930",
    "id": 1205945400,
    "node_id": "I_kwDOAqHbmM5H4UQ4",
    "number": 1930,
    "title": "`Error on docker event: InternalInconsistencyError: Expected supervised container to have name '<serviceName>_<imageId>_<releaseId>_<commit>', got: /$TEMPORARY_CONTAINER_NAME`",
    "user": {
      "login": "cywang117",
      "id": 38748558,
      "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cywang117",
      "html_url": "https://github.com/cywang117",
      "followers_url": "https://api.github.com/users/cywang117/followers",
      "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
      "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
      "organizations_url": "https://api.github.com/users/cywang117/orgs",
      "repos_url": "https://api.github.com/users/cywang117/repos",
      "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cywang117/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 888496311,
        "node_id": "MDU6TGFiZWw4ODg0OTYzMTE=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/Needs%20more%20investigation",
        "name": "Needs more investigation",
        "color": "ad4522",
        "default": false,
        "description": "More investigation is needed to find the cause or fix"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2022-04-15T23:15:17Z",
    "updated_at": "2022-04-22T13:32:36Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Device type: raspberrypi4-64\r\n\r\nSupervisor version: 13.1.1\r\n\r\nContainer stuck restarting and exiting with the following logs:\r\n\r\nThe `service exit` and `service restart` events log repeatedly, and the cause of that may be another issue not related to the Supervisor. The main bit that requires investigation is the `InternalInconsistencyError` which indicates something is not behaving as expected..\r\n\r\nIt may be possible to trigger this behavior by pushing a container that exits & restarts rapidly.\r\n\r\n```\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]   Error on docker event: InternalInconsistencyError: Expected supervised container to have name '<serviceName>_<imageId>_<releaseId>_<commit>', got: /flamboyant_taussig\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]         at Function.fromDockerContainer (/usr/src/app/dist/app.js:10:832269)\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]       at getByDockerContainerId (/usr/src/app/dist/app.js:6:307112)\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]       at runMicrotasks (<anonymous>)\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]       at processTicksAndRejections (internal/process/task_queues.js:97:5)\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]       at async Stream.<anonymous> (/usr/src/app/dist/app.js:6:317107) InternalInconsistencyError: Expected supervised container to have name '<serviceName>_<imageId>_<releaseId>_<commit>', got: /flamboyant_taussig\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]       at Function.fromDockerContainer (/usr/src/app/dist/app.js:10:832269)\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]       at getByDockerContainerId (/usr/src/app/dist/app.js:6:307112)\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]       at runMicrotasks (<anonymous>)\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]       at processTicksAndRejections (internal/process/task_queues.js:97:5)\r\nApr 15 23:06:31 1934c68 3c8e646e80ab[1557]: [error]       at async Stream.<anonymous> (/usr/src/app/dist/app.js:6:317107)\r\nApr 15 23:07:19 1934c68 balenad[1557]: time=\"2022-04-15T23:07:19.167727385Z\" level=warning msg=\"Configured runtime \\\"runc\\\" is deprecated and will be removed in the next release\"\r\nApr 15 23:07:19 1934c68 balenad[1616]: time=\"2022-04-15T23:07:19.202680512Z\" level=warning msg=\"runtime v1 is deprecated since containerd v1.4, consider using runtime v2\"\r\nApr 15 23:07:19 1934c68 balenad[1616]: time=\"2022-04-15T23:07:19.206725552Z\" level=info msg=\"shim balena-engine-containerd-shim started\" address=/containerd-shim/1b99bb714a77c26c0f584949e5a464da663773d2e1080f615266634a6bdd29ee.sock debug=false pid=170880\r\nApr 15 23:07:19 1934c68 3c8e646e80ab[1557]: [event]   Event: Service restart {\"service\":{\"appId\":1751090,\"serviceId\":715860,\"serviceName\":\"solmon\",\"commit\":\"c44cf2c1e612468310695219e7caeebf\",\"releaseId\":2010423}}\r\nApr 15 23:07:21 1934c68 balenad[1616]: time=\"2022-04-15T23:07:21.019385010Z\" level=info msg=\"shim reaped\" id=beb85a59bfdc58c93a822e39c105c879aa2be9c2d6bbe047bd41bb34437e714b\r\nApr 15 23:07:21 1934c68 balenad[1557]: time=\"2022-04-15T23:07:21.028084325Z\" level=info msg=\"ignoring event\" container=beb85a59bfdc58c93a822e39c105c879aa2be9c2d6bbe047bd41bb34437e714b module=libcontainerd namespace=moby topic=/tasks/delete type=\"*events.TaskDelete\"\r\nApr 15 23:07:21 1934c68 3c8e646e80ab[1557]: [event]   Event: Service exit {\"service\":{\"appId\":1751090,\"serviceId\":715860,\"serviceName\":\"solmon\",\"commit\":\"c44cf2c1e612468310695219e7caeebf\",\"releaseId\":2010423}}\r\nApr 15 23:07:47 1934c68 3c8e646e80ab[1557]: [info]    Healthcheck failure - At least ONE of the following conditions must be true:\r\nApr 15 23:07:47 1934c68 3c8e646e80ab[1557]: [info]              - No connectivityCheckEnabled   ? false\r\nApr 15 23:07:47 1934c68 3c8e646e80ab[1557]: [info]            - device state is disconnected  ? false\r\nApr 15 23:07:47 1934c68 3c8e646e80ab[1557]: [info]            - stateReportErrors less then 3 ? false\r\nApr 15 23:07:47 1934c68 3c8e646e80ab[1557]: [error]   Healthcheck failed\r\nApr 15 23:07:47 1934c68 3c8e646e80ab[1557]: [api]     GET /v1/healthy 500 - 9.223 ms\r\n```\r\n\r\nSource of error is in [Service.fromDockerContainer](https://github.com/balena-os/balena-supervisor/blob/bef4fbab05945577c625edba1850ab0b5dd8a498/src/compose/service.ts#L655-L659)",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1930/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1925",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1925/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1925/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1925/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1925",
    "id": 1200175582,
    "node_id": "I_kwDOAqHbmM5HiTne",
    "number": 1925,
    "title": "Ignore container hostname from the list of aliases when comparing networks",
    "user": {
      "login": "pipex",
      "id": 1822826,
      "node_id": "MDQ6VXNlcjE4MjI4MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1822826?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipex",
      "html_url": "https://github.com/pipex",
      "followers_url": "https://api.github.com/users/pipex/followers",
      "following_url": "https://api.github.com/users/pipex/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipex/subscriptions",
      "organizations_url": "https://api.github.com/users/pipex/orgs",
      "repos_url": "https://api.github.com/users/pipex/repos",
      "events_url": "https://api.github.com/users/pipex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipex/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2022-04-11T15:50:20Z",
    "updated_at": "2022-04-11T16:39:02Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Since moby v20.10.0 (and since balena engine v20.10.12) the engine the service hostname as an extra alias to the network configuration (see https://github.com/moby/moby/pull/39204). \r\n\r\n\r\nThis means that current and target state no longer match when comparing networks, leading to a restart loop for the service.\r\n\r\n```\r\n[warn] Ignoring unsupported or unknown compose fields: containerName\r\n[debug] Networks do not match!\r\n[debug] Current network:\r\n[debug] {\"aliases\":[\"myservice\",\"5f0b0df5ab26\",\"balena.local\"]}\r\n[debug] New network:\r\n[debug] {\"aliases\":[\"myservice\"]}\r\n[debug] Replacing container for service myservice because of config changes:\r\n[debug] Network changes detected\r\n[debug] Networks do not match!\r\n[debug] Current network:\r\n[debug] {\"aliases\":[\"myservice\",\"5f0b0df5ab26\",\"balena.local\"]}\r\n[debug] New network:\r\n[debug] {\"aliases\":[\"myservice\"]}\r\n```\r\n\r\nThe supervisor needs to consider this case and take out the hostname from current and target when making the comparison here\r\n\r\nhttps://github.com/balena-os/balena-supervisor/blob/a2f739789dc3e253c7c047689ab0ec91b58b777a/src/compose/service.ts#L1057-L1072",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1925/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1925/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1924",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1924/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1924/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1924/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1924",
    "id": 1197624796,
    "node_id": "I_kwDOAqHbmM5HYk3c",
    "number": 1924,
    "title": "Allow update API endpoints to fetch + apply target state regardless of `instantUpdates` status when request body specifies it",
    "user": {
      "login": "cywang117",
      "id": 38748558,
      "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cywang117",
      "html_url": "https://github.com/cywang117",
      "followers_url": "https://api.github.com/users/cywang117/followers",
      "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
      "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
      "organizations_url": "https://api.github.com/users/cywang117/orgs",
      "repos_url": "https://api.github.com/users/cywang117/repos",
      "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cywang117/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 1024940307,
        "node_id": "MDU6TGFiZWwxMDI0OTQwMzA3",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/Needs%20discussion",
        "name": "Needs discussion",
        "color": "4ed85b",
        "default": false,
        "description": "The fix for this needs to be discussed."
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2022-04-08T18:07:09Z",
    "updated_at": "2022-04-14T15:22:31Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Currently, if instantUpdates are set to false (i.e. VPN_CONTROL is disabled), the Supervisor will only fetch and apply target state on API_POLL_INTERVAL. If the user wishes to update the device state regardless of VPN_CONTROL status, they will need to wait the poll interval, which may be an issue if the interval is long, or they've made a mistake by disabling VPN.\r\n\r\nThe request body should contain something like `{ \"ignoreInstantUpdate\": boolean}` (or something less verbose) to allow this functionality to occur. \r\n\r\n`force` in the request body up until now has been used for forcing an action regardless of update locks only, so perhaps it should be kept separate from this functionality.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1924/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1924/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1923",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1923/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1923/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1923/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1923",
    "id": 1197593302,
    "node_id": "I_kwDOAqHbmM5HYdLW",
    "number": 1923,
    "title": "Be aware of crashes that fill data partition with core dumps",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2022-04-08T17:41:32Z",
    "updated_at": "2022-04-08T18:34:46Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Mentioned in https://github.com/balena-os/balena-supervisor/issues/1916, the Supervisor was calling a tool which was crashing on certain boards and filling the data partition. The Supervisor should develop some strategy to detect these type of incidents. \r\n\r\nThe Supervisor should log to the dashboard or journal if it detects this scenario happening or maybe even just log \"Call to X failed, coredump sent to data partition. (Warning: This might fill up all the disk space!)\"\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1923/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1922",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1922/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1922/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1922/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1922",
    "id": 1196813927,
    "node_id": "I_kwDOAqHbmM5HVe5n",
    "number": 1922,
    "title": "Add jitter to reporting current state",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-04-08T04:26:03Z",
    "updated_at": "2022-04-12T04:16:24Z",
    "closed_at": "2022-04-12T04:16:24Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "The reporting of current state does not have any jitter like the fetching of target state seen [here](https://github.com/balena-os/balena-supervisor/blob/master/src/device-state/target-state.ts#L181-L183).\r\n\r\nThis is a problem if a fleet gets rebooted since they may start reporting current state all at the same time.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1922/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1922/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1921",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1921/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1921/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1921/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1921",
    "id": 1196802682,
    "node_id": "I_kwDOAqHbmM5HVcJ6",
    "number": 1921,
    "title": "Use backoff lib for getting target state",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-04-08T04:07:08Z",
    "updated_at": "2022-04-08T04:11:26Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "In https://github.com/balena-os/balena-supervisor/commit/2fdb83839c2262b398deb77eb0fa4ae2c16c374a we created a lib for backing off asynchronous functions with support for retryAfter values present in the exception (typically Retry-After headers). This change made reporting the current state much cleaner and easier to modify without global state being shared across functions.\r\n\r\nI'm creating this issue because the fetching of target state implements its own polling interval with backoff algorithm using globally stored values. This makes it difficult to see how the poll interval is set and updated as well as provides differing logic when handling async exception specifically HTTP requests which might be returning a Retry-After header but that is ignored.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1921/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1919",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1919/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1919/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1919/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1919",
    "id": 1196632525,
    "node_id": "I_kwDOAqHbmM5HUynN",
    "number": 1919,
    "title": "Disable instead of stop VPN when receiving VPN_CONTROL of false ",
    "user": {
      "login": "cywang117",
      "id": 38748558,
      "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cywang117",
      "html_url": "https://github.com/cywang117",
      "followers_url": "https://api.github.com/users/cywang117/followers",
      "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
      "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
      "organizations_url": "https://api.github.com/users/cywang117/orgs",
      "repos_url": "https://api.github.com/users/cywang117/repos",
      "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cywang117/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2022-04-07T22:31:07Z",
    "updated_at": "2022-04-07T22:31:07Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "The Supervisor currently stops the VPN through dbus. This means that on a reboot, systemd will start up the VPN before the Supervisor starts up to apply VPN_CONTROL settings to shut down the VPN. \r\n\r\nThis is not a definite feature request, but we could test whether disabling the VPN instead of simply stopping it will have any side effects. If there are no negative effects, disabling may be the way to go to ensure there are no unexpected VPN connections.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1919/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1918",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1918/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1918/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1918/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1918",
    "id": 1196513772,
    "node_id": "I_kwDOAqHbmM5HUVns",
    "number": 1918,
    "title": "Supervisor reports a service downloading without any download progress",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-04-07T20:03:25Z",
    "updated_at": "2022-04-08T02:56:15Z",
    "closed_at": "2022-04-08T02:56:15Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "I suspected https://github.com/balena-os/balena-supervisor/commit/21c1c006f7b8dfcf566f3e4a8e853e5e9978edf4 to be the culprit but I found the behavior to persist even before that change.\r\n\r\n![image](https://user-images.githubusercontent.com/3946250/162286470-9ccc2e70-6a9a-431f-8aea-6c3005473465.png)\r\n\r\n![image](https://user-images.githubusercontent.com/3946250/162286802-f60c0ea1-afc5-44d5-a296-a4981185ef17.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1918/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1916",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1916/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1916/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1916/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1916",
    "id": 1194680905,
    "node_id": "I_kwDOAqHbmM5HNWJJ",
    "number": 1916,
    "title": "Core dumps filling the data partition on Compulab IOT-gate-imx8 boards",
    "user": {
      "login": "majorz",
      "id": 188837,
      "node_id": "MDQ6VXNlcjE4ODgzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/188837?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/majorz",
      "html_url": "https://github.com/majorz",
      "followers_url": "https://api.github.com/users/majorz/followers",
      "following_url": "https://api.github.com/users/majorz/following{/other_user}",
      "gists_url": "https://api.github.com/users/majorz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/majorz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/majorz/subscriptions",
      "organizations_url": "https://api.github.com/users/majorz/orgs",
      "repos_url": "https://api.github.com/users/majorz/repos",
      "events_url": "https://api.github.com/users/majorz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/majorz/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-04-06T14:15:11Z",
    "updated_at": "2022-04-08T17:41:51Z",
    "closed_at": "2022-04-08T17:41:51Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "In d06b8e0 we started using `dmidecode` to obtain system ID, but it is crashing and creating core dumps on `Compulab IOT-gate-imx8` boards. Since the crashes are happening repeatedly, eventually the whole data partition fills up with core dumps and the device becomes dysfunctional.\r\n\r\nRunning a newer `dmidecode` on the device does not crash. I tried version 3.3 from Alpine. It does not return a system ID though:\r\n```\r\n# dmidecode 3.3\r\n# No SMBIOS nor DMI entry point found, sorry.\r\n```\r\n\r\nThat device does not have `/proc/device-tree/serial-number` exposed, which leads to running `dmidecode`. On that device a `/proc/device-tree/product-sn` exists though together with some related fields:\r\n```\r\n/proc/device-tree/product-name \r\nUCM-iMX8M\r\n\r\n/proc/device-tree/product-options \r\nC1800Q-D2-N16-E\r\n\r\n/proc/device-tree/product-revision \r\n1.11\r\n\r\n/proc/device-tree/product-sn \r\n5a1066895\r\n```\r\n\r\nIt looks like we need to upgrade `dmidecode` and possibly use `/proc/device-tree/product-sn` as alternative to `/proc/device-tree/serial-number`.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1916/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1915",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1915/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1915/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1915/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1915",
    "id": 1193553095,
    "node_id": "I_kwDOAqHbmM5HJCzH",
    "number": 1915,
    "title": "Infinite loop attempting to apply configuration variable with invalid value",
    "user": {
      "login": "pdcastro",
      "id": 15091591,
      "node_id": "MDQ6VXNlcjE1MDkxNTkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/15091591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pdcastro",
      "html_url": "https://github.com/pdcastro",
      "followers_url": "https://api.github.com/users/pdcastro/followers",
      "following_url": "https://api.github.com/users/pdcastro/following{/other_user}",
      "gists_url": "https://api.github.com/users/pdcastro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pdcastro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pdcastro/subscriptions",
      "organizations_url": "https://api.github.com/users/pdcastro/orgs",
      "repos_url": "https://api.github.com/users/pdcastro/repos",
      "events_url": "https://api.github.com/users/pdcastro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pdcastro/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-04-05T18:18:17Z",
    "updated_at": "2022-04-05T18:18:54Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "If the `RESIN_HOST_ODMDATA_configuration` configuration variable is set to value `0` through the web dashboard, the supervisor gets in a loop logging:\r\n\r\n```\r\n05.04.22 14:22:05 (+0200) Applied boot config: {\"configuration\":\"0\"}\r\n05.04.22 14:22:05 (+0200) Applying boot config: {}\r\n05.04.22 14:22:05 (+0200) Applied boot config: {}\r\n05.04.22 14:22:05 (+0200) Applying boot config: {\"configuration\":\"0\"}\r\n05.04.22 14:22:05 (+0200) Applied boot config: {\"configuration\":\"0\"}\r\n05.04.22 14:22:05 (+0200) Applying boot config: {}\r\n05.04.22 14:22:06 (+0200) Applied boot config: {}\r\n05.04.22 14:22:06 (+0200) Applying boot config: {\"configuration\":\"0\"}\r\n05.04.22 14:22:06 (+0200) Applied boot config: {\"configuration\":\"0\"}\r\n05.04.22 14:22:06 (+0200) Applying boot config: {}\r\n05.04.22 14:22:06 (+0200) Applied boot config: {}\r\n05.04.22 14:22:06 (+0200) Applying boot config: {\"configuration\":\"0\"}\r\n05.04.22 14:22:06 (+0200) Applied boot config: {\"configuration\":\"0\"}\r\n05.04.22 14:22:06 (+0200) Applying boot config: {}\r\n05.04.22 14:22:07 (+0200) Applied boot config: {}\r\n05.04.22 14:22:07 (+0200) Applying boot config: {\"configuration\":\"0\"}\r\n```\r\n\r\nJF Pattern [RESIN_HOST_ODMDATA_configuration var on TX2 devices](https://jel.ly.fish/pattern-resin-host-odmdata-configuration-var-tx2-devices-56728bc) states:\r\n\r\n> Setting RESIN_HOST_ODMDATA_configuration = 0 on a TX2 device causes it to spam the log that it's applying new boot configs, but they are all empty. It is not clear that the available config options are from 1 to 6.\r\n\r\nIndeed, the valid values for `RESIN_HOST_ODMDATA_configuration` appear to be 1 to 6, as defined at:\r\nhttps://github.com/balena-io/open-balena-api/blob/v0.203.0/src/features/vars-schema/env-vars.ts#L230-L239\r\n\r\n**If** it is a case that the supervisor attempts value validation and fails (I do not know that it is the case, though), then it should perhaps remember this and not keep trying again.\r\n\r\nA closely related issue seems to be #1743.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1915/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1915/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1913",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1913/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1913/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1913/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1913",
    "id": 1189732813,
    "node_id": "I_kwDOAqHbmM5G6eHN",
    "number": 1913,
    "title": "Supervisor v13.0.0 fails to download image with: Undefined binding(s) detected when compiling UPDATE. Undefined column(s)",
    "user": {
      "login": "jellyfish-bot",
      "id": 62708150,
      "node_id": "MDQ6VXNlcjYyNzA4MTUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/62708150?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jellyfish-bot",
      "html_url": "https://github.com/jellyfish-bot",
      "followers_url": "https://api.github.com/users/jellyfish-bot/followers",
      "following_url": "https://api.github.com/users/jellyfish-bot/following{/other_user}",
      "gists_url": "https://api.github.com/users/jellyfish-bot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jellyfish-bot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jellyfish-bot/subscriptions",
      "organizations_url": "https://api.github.com/users/jellyfish-bot/orgs",
      "repos_url": "https://api.github.com/users/jellyfish-bot/repos",
      "events_url": "https://api.github.com/users/jellyfish-bot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jellyfish-bot/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2022-04-01T12:34:11Z",
    "updated_at": "2022-04-05T14:34:40Z",
    "closed_at": "2022-04-05T14:34:40Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "[thgreasi] ```\n01.04.22 06:10:58 (+0000) Downloading image 'registry2.balena-cloud.com/v2/...@sha256:...'\n01.04.22 06:18:51 (+0000) Failed to download image 'registry2.balena-cloud.com/v2/...@sha256:...' due to 'Undefined binding(s) detected when compiling UPDATE. Undefined column(s): [appUuid] query: update `image` set `name` = ?, `appId` = ?, `serviceId` = ?, `serviceName` = ?, `imageId` = ?, `releaseId` = ?, `commit` = ?, `dependent` = ?, `dockerImageId` = ? where `name` = ? and `appId` = ? and `appUuid` = ? and `serviceId` = ? and `serviceName` = ? and `imageId` = ? and `releaseId` = ? and `commit` = ? and `dependent` = ? and `dockerImageId` = ?'\n01.04.22 07:02:57 (+0000) Rebooting\n01.04.22 07:31:26 (+0000) Supervisor starting\n01.04.22 07:50:12 (+0000) Rebooting\n01.04.22 07:51:16 (+0000) Supervisor starting\n```",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1913/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1909",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1909/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1909/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1909/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1909",
    "id": 1177225182,
    "node_id": "I_kwDOAqHbmM5GKwfe",
    "number": 1909,
    "title": "PSA: Supervisor cannot report CPU temperature accurately on BeagleBone Black devices",
    "user": {
      "login": "cywang117",
      "id": 38748558,
      "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cywang117",
      "html_url": "https://github.com/cywang117",
      "followers_url": "https://api.github.com/users/cywang117/followers",
      "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
      "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
      "organizations_url": "https://api.github.com/users/cywang117/orgs",
      "repos_url": "https://api.github.com/users/cywang117/repos",
      "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cywang117/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2022-03-22T19:40:51Z",
    "updated_at": "2022-03-22T19:47:20Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "The Supervisor uses `systeminformation` currently to report device metrics including CPU temp. `systeminformation` reads from `/sys/class/thermal` for temperature readings. On the BeagleBone Black, both `/sys/class/thermal` and `/sys/class/hwmon` directories are empty, so it's not possible using software alone to read the CPU temp, unless the kernel is 3.8.x. This is a hardware manufacturer decision that the Supervisor cannot work around. See: https://forum.beagleboard.org/t/beaglebone-black-cpu-temperature/2183\r\n\r\nCurrently, the default CPU temp that's reported when no temperature can be read is `null` from `systeminformation` which is normalized to `0` on the dashboard. In older Supervisor versions running [systeminformation@2.x](https://github.com/sebhildebrandt/systeminformation/blob/master/CHANGELOG.md#major-breaking-changes---version-2). this value may be `-1` which remains as `-1` on the dashboard.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1909/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1909/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1907",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1907/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1907/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1907/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1907",
    "id": 1175345033,
    "node_id": "I_kwDOAqHbmM5GDleJ",
    "number": 1907,
    "title": "balenaCloud CPU Usage metric not updating as expected",
    "user": {
      "login": "kb2ma",
      "id": 2944058,
      "node_id": "MDQ6VXNlcjI5NDQwNTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2944058?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kb2ma",
      "html_url": "https://github.com/kb2ma",
      "followers_url": "https://api.github.com/users/kb2ma/followers",
      "following_url": "https://api.github.com/users/kb2ma/following{/other_user}",
      "gists_url": "https://api.github.com/users/kb2ma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kb2ma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kb2ma/subscriptions",
      "organizations_url": "https://api.github.com/users/kb2ma/orgs",
      "repos_url": "https://api.github.com/users/kb2ma/repos",
      "events_url": "https://api.github.com/users/kb2ma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kb2ma/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2022-03-21T12:54:55Z",
    "updated_at": "2022-04-20T07:23:10Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "balenaCloud tracks CPU usage for a device. This value appears on the dashboard as the CPU indicator. Some customers and I have noticed that the CPU value seems to get \"stuck\", often at a high level for an hour or more. For example, see this [forum topic](https://forums.balena.io/t/cpu-usage-metric-reports-high/351211).\r\n\r\nBelow are some observations about metrics collection in general, but they apply to the specific problem of CPU usage. In summary I think the feature is working as written. There are ways to make it more responsive without adding load to the system.\r\n\r\n## Background\r\nThe values in balenaCloud are the result of the Supervisor sending data from the device and the balena API accepting the data at the server.  The server accepts a new system metric report approximately every 200 seconds (3 1/2 minutes). In other words, if the server receives a changed metric for a device less than 200 seconds after the previous report, it discards that metric. This change is relatively recent, and may explain why we are hearing of this issue now.\r\n\r\nAlso the server accepts any provided metric values, and does not expect all metric values at once. If a value is not provided, the existing value is not changed.\r\n\r\nThe Supervisor takes metric readings every 10 seconds, and uses buckets to determine when to send to the server. The buckets are:\r\n* CPU usage -- 0, 20, 40, ... 100 %\r\n* CPU temperature -- 0, 5, 10, ... C\r\n* Memory usage -- 0, 10, 20, ... MB\r\n\r\nThe use of _buckets_ is significant. It means that the supervisor considers 99 MB to be in 90 MB bucket, but 100 MB is in the 100 MB bucket.\r\n\r\n## Observations\r\n1. There is inherent jitter in the cpu_temp and memory_usage readings. See examples below.\r\n2. `isSignificant` calculation uses absolute bucket boundaries as described above. So if memory jittering on a boundary, like 319 - 320 MB, generates signficance. See examples below.\r\n3. Only publishes the metric that changed. So if only CPU temperature changes significantly, does not send CPU usage, memory usage, or storage usage. Anecdotally I found that adding load resulted in a significant CPU temperature change on a metrics collection iteration _preceding_ the iteration for a significant CPU usage change.\r\n4. cpu_usage and cpu_temp are linked/dependent variables. Since cpu_temp is jittery, its changes tend to dominate cpu_usage.\r\n5. The intervals for measurement changes are significantly different on the server and the Supervisor 200 sec vs. 10 sec. This leads to confusion for users. The Supervisor compares readings from as recently as 10 seconds ago, but the user sees a previosu value from possibly many minutes earlier.\r\n\r\n### Examples\r\nAll of these examples were collected on an Intel NUC running balenaOS 2.89.15 and Supervisor 12.11.42\r\n\r\nAdded logging when Supervisor determines if a metric has changed buckets (isSignificant). Notice especially the jitter in memory_usage at bucket boundaries.\r\n```\r\nMar 20 17:50:38 [info]    memory_usage isSignificant: 318 to 327\r\nMar 20 17:50:38 [info]    cpu_temp isSignificant: 32 to 42\r\nMar 20 17:50:38 [info]    Reported current state to the cloud\r\nMar 20 17:50:48 [info]    memory_usage isSignificant: 327 to 318\r\nMar 20 17:50:48 [info]    cpu_temp isSignificant: 42 to 30\r\nMar 20 17:50:48 [info]    Reported current state to the cloud\r\nMar 20 17:51:18 [info]    memory_usage isSignificant: 318 to 320\r\nMar 20 17:51:18 [info]    Reported current state to the cloud\r\nMar 20 17:51:38 [info]    memory_usage isSignificant: 320 to 318\r\nMar 20 17:51:38 [info]    Reported current state to the cloud\r\nMar 20 17:51:48 [info]    cpu_temp isSignificant: 30 to 35\r\nMar 20 17:51:49 [info]    Reported current state to the cloud\r\nMar 20 17:51:58 [info]    cpu_temp isSignificant: 35 to 31\r\nMar 20 17:51:58 [info]    Reported current state to the cloud\r\nMar 20 17:52:48 [info]    memory_usage isSignificant: 318 to 320\r\nMar 20 17:52:48 [info]    Reported current state to the cloud\r\nMar 20 17:53:08 [debug]   Attempting container log timestamp flush...\r\nMar 20 17:53:08 [debug]   Container log timestamp flush complete\r\nMar 20 17:53:09 [api]     GET /v1/healthy 200 - 2.180 ms\r\nMar 20 17:53:18 [info]    cpu_temp isSignificant: 31 to 38\r\nMar 20 17:53:18 [info]    Reported current state to the cloud\r\nMar 20 17:53:28 [info]    cpu_temp isSignificant: 38 to 30\r\nMar 20 17:53:28 [info]    Reported current state to the cloud\r\nMar 20 17:54:08 [info]    memory_usage isSignificant: 320 to 319\r\nMar 20 17:54:08 [info]    Reported current state to the cloud\r\nMar 20 17:54:18 [info]    memory_usage isSignificant: 319 to 321\r\nMar 20 17:54:18 [info]    Reported current state to the cloud\r\nMar 20 17:56:08 [info]    memory_usage isSignificant: 321 to 319\r\nMar 20 17:56:08 [info]    Reported current state to the cloud\r\nMar 20 17:56:18 [info]    memory_usage isSignificant: 319 to 320\r\nMar 20 17:56:18 [info]    Reported current state to the cloud\r\nMar 20 17:56:28 [info]    memory_usage isSignificant: 320 to 317\r\nMar 20 17:56:28 [info]    Reported current state to the cloud\r\nMar 20 17:57:58 [info]    cpu_temp isSignificant: 30 to 35\r\nMar 20 17:57:58 [info]    Reported current state to the cloud\r\nMar 20 17:58:08 [info]    cpu_temp isSignificant: 35 to 31\r\nMar 20 17:58:08 [info]    Reported current state to the cloud\r\nMar 20 17:58:09 [api]     GET /v1/healthy 200 - 1.739 ms\r\nMar 20 18:00:08 [info]    memory_usage isSignificant: 317 to 320\r\nMar 20 18:00:08 [info]    Reported current state to the cloud\r\n```\r\n\r\nCollected CPU temperature readings every 2.5 seconds in a separate container using the same `systeminformation` package as the Supervisor. Notice the inherent jitter in temperature readings, including 14:27:50 outside the 30-34 bucket.\r\n\r\n```\r\nMar 19 14:27:00 {'CPU': 0, 'Temp': 32}\r\nMar 19 14:27:03 {'CPU': 0, 'Temp': 31}\r\nMar 19 14:27:05 {'CPU': 1, 'Temp': 32}\r\nMar 19 14:27:08 {'CPU': 0, 'Temp': 32}\r\nMar 19 14:27:10 {'CPU': 0, 'Temp': 34}\r\nMar 19 14:27:13 {'CPU': 0, 'Temp': 32}\r\nMar 19 14:27:15 {'CPU': 0, 'Temp': 32}\r\nMar 19 14:27:18 {'CPU': 0, 'Temp': 30}\r\nMar 19 14:27:20 {'CPU': 0, 'Temp': 32}\r\nMar 19 14:27:23 {'CPU': 0, 'Temp': 32}\r\nMar 19 14:27:25 {'CPU': 1, 'Temp': 32}\r\nMar 19 14:27:28 {'CPU': 0, 'Temp': 33}\r\nMar 19 14:27:30 {'CPU': 0, 'Temp': 34}\r\nMar 19 14:27:33 {'CPU': 0, 'Temp': 32}\r\nMar 19 14:27:35 {'CPU': 1, 'Temp': 32}\r\nMar 19 14:27:38 {'CPU': 0, 'Temp': 34}\r\nMar 19 14:27:40 {'CPU': 0, 'Temp': 33}\r\nMar 19 14:27:43 {'CPU': 0, 'Temp': 31}\r\nMar 19 14:27:45 {'CPU': 0, 'Temp': 32}\r\nMar 19 14:27:48 {'CPU': 1, 'Temp': 33}\r\nMar 19 14:27:50 {'CPU': 0, 'Temp': 37}\r\nMar 19 14:27:53 {'CPU': 0, 'Temp': 34}\r\nMar 19 14:27:55 {'CPU': 1, 'Temp': 32}\r\nMar 19 14:27:58 {'CPU': 0, 'Temp': 32}\r\n```\r\n\r\n## Suggestions\r\n1. If one reading changes, send all four of the readings even if they are not significantly different. This would help CPU usage with the linkage to temperature. I would not expect a significant issue on the server with this change.\r\n\r\n2.  Might be better to use relative change in value rather than absolute bucket boundaries to determine if a change is significant. For example if last published memory usage reading was 324, then a significant reading must be < 314 or > 334. This could reduce nework traffic to the server that would be rejected anyway due to frequency.\r\n\r\n3. Maybe increase the bucket size for cpu_temp due to inherent jitter observed in temperature readings.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1907/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1906",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1906/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1906/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1906/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1906",
    "id": 1175228434,
    "node_id": "I_kwDOAqHbmM5GDJAS",
    "number": 1906,
    "title": "Device state not reported; ip_address too long",
    "user": {
      "login": "kb2ma",
      "id": 2944058,
      "node_id": "MDQ6VXNlcjI5NDQwNTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2944058?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kb2ma",
      "html_url": "https://github.com/kb2ma",
      "followers_url": "https://api.github.com/users/kb2ma/followers",
      "following_url": "https://api.github.com/users/kb2ma/following{/other_user}",
      "gists_url": "https://api.github.com/users/kb2ma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kb2ma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kb2ma/subscriptions",
      "organizations_url": "https://api.github.com/users/kb2ma/orgs",
      "repos_url": "https://api.github.com/users/kb2ma/repos",
      "events_url": "https://api.github.com/users/kb2ma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kb2ma/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 401685774,
        "node_id": "MDU6TGFiZWw0MDE2ODU3NzQ=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/type/bug",
        "name": "type/bug",
        "color": "fca383",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 9,
    "created_at": "2022-03-21T11:09:38Z",
    "updated_at": "2022-04-11T13:09:37Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Running Supervisor version 12.11.42 on balenaOS 2.89.15 on an Intel NUC. The following messages show in the supervisor logs:\r\n\r\n```\r\nMar 20 11:16:09 04166f8 balena-supervisor[1821]: [info]    Reported current state to the cloud\r\nMar 20 11:16:28 04166f8 balena-supervisor[1821]: [error]   Device state report failure! Status code: 400 - message: \"\\\"ip_address\\\" longer than 255 characters (267)\"\r\nMar 20 11:16:28 04166f8 balena-supervisor[1821]: [info]    Retrying current state report in 15 seconds\r\nMar 20 11:16:44 04166f8 balena-supervisor[1821]: [error]   Device state report failure! Status code: 400 - message: \"\\\"ip_address\\\" longer than 255 characters (267)\"\r\n```\r\n\r\nThe messages continue on, with the time interval doubling to 480 seconds, and then 900 seconds.\r\n\r\nThe balena device has two Internet interfaces, ethernet and WiFi. `ifconfig` for these interfaces looks like this:\r\n\r\n```\r\neno1      Link encap:Ethernet  HWaddr 1C:69:7A:6E:6E:40  \r\n          inet addr:192.168.1.103  Bcast:192.168.1.255  Mask:255.255.255.0\r\n          inet6 addr: fe80::bcc7:cd23:a208:5ff1/64 Scope:Link\r\n          inet6 addr: xxxx:xxxx:xxxx:xxxx::109/128 Scope:Global\r\n          inet6 addr: xxxx:xxxx:xxxx:xxxx:e85a:8046:6d9d:ef41/64 Scope:Global\r\n          inet6 addr: fd25:36da:e8ec::109/128 Scope:Global\r\n          inet6 addr: fd25:36da:e8ec:0:3e6f:7653:ae69:9c36/64 Scope:Global\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:4611 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:4745 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000 \r\n          RX bytes:571584 (558.1 KiB)  TX bytes:930190 (908.3 KiB)\r\n          Interrupt:16 Memory:a8b00000-a8b20000 \r\n\r\nwlp0s20f3 Link encap:Ethernet  HWaddr 54:8D:5A:65:1B:52  \r\n          inet addr:192.168.1.217  Bcast:192.168.1.255  Mask:255.255.255.0\r\n          inet6 addr: fd25:36da:e8ec:0:6c57:ceac:3fae:4b27/64 Scope:Global\r\n          inet6 addr: xxxx:xxxx:xxxx:xxxx::4f4/128 Scope:Global\r\n          inet6 addr: xxxx:xxxx:xxxx:xxxx:6829:7689:63e6:b0e3/64 Scope:Global\r\n          inet6 addr: fd25:36da:e8ec::4f4/128 Scope:Global\r\n          inet6 addr: fe80::c229:cf2c:6cd8:cb0d/64 Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:189 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:294 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000 \r\n          RX bytes:57744 (56.3 KiB)  TX bytes:57074 (55.7 KiB)\r\n```\r\n\r\nI was able to work around the problem by taking down the WiFi interface. Notice that now balenaCloud shows the following information.\r\n\r\n![error-ip-address-device](https://user-images.githubusercontent.com/2944058/159739097-8f16e866-384a-4faa-b4b9-0dec4dbab879.png)\r\n\r\nIn both the graphic and the interface listing, I have obfuscated the network portion of the globally routable addresses. The `fd25...` addresses are system generated unique local addresses. Perhaps the root cause is that the Supervisor is trying to send all of these addresses in the device state report. This guess is consistent with working around the problem by taking down the WiFi interface.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1906/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1905",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1905/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1905/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1905/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1905",
    "id": 1175207364,
    "node_id": "I_kwDOAqHbmM5GDD3E",
    "number": 1905,
    "title": "Supervisor patches device state without status in service body",
    "user": {
      "login": "fisehara",
      "id": 9320751,
      "node_id": "MDQ6VXNlcjkzMjA3NTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9320751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fisehara",
      "html_url": "https://github.com/fisehara",
      "followers_url": "https://api.github.com/users/fisehara/followers",
      "following_url": "https://api.github.com/users/fisehara/following{/other_user}",
      "gists_url": "https://api.github.com/users/fisehara/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fisehara/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fisehara/subscriptions",
      "organizations_url": "https://api.github.com/users/fisehara/orgs",
      "repos_url": "https://api.github.com/users/fisehara/repos",
      "events_url": "https://api.github.com/users/fisehara/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fisehara/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2022-03-21T10:50:54Z",
    "updated_at": "2022-03-21T11:52:43Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Recently the API faces a device state patch that sends a body with a missing service `status` property which is a mandatory field.\r\n\r\n```\r\n{\r\n    \"local\": {\r\n        \"apps\": {\r\n            \"blacked\": {\r\n                \"services\": {\r\n                    \"blacked\": {\r\n                        \"download_progress\": None,\r\n                        \"releaseId\": blacked,\r\n                        \"status\": \"Running\"\r\n                    },\r\n                    \"blacked\": {\r\n                        \"download_progress\": None,\r\n                        \"releaseId\": blacked,\r\n                        \"status\": \"Running\"\r\n                    },\r\n                    \"blacked\": {\r\n                        \"download_progress\": None,\r\n                        \"releaseId\": blacked,\r\n                        \"status\": \"Running\"\r\n                    },\r\n                    \"blacked\": {\r\n                        \"download_progress\": None,\r\n                        \"releaseId\": blacked,\r\n                        \"status\": \"Running\"\r\n                    },\r\n                    \"blacked\": {\r\n                        \"releaseId\": blacked,\r\n                        \"status\": \"Downloaded\"\r\n                    },\r\n                    \"blacked\": {\r\n                        \"releaseId\": blacked,\r\n                        \"status\": \"Downloaded\"\r\n                    },\r\n>                    \"blacked\": {\r\n>                        \"download_progress\": 48,\r\n>                        \"releaseId\": blacked\r\n>                    },\r\n                    \"blacked\": {\r\n                        \"releaseId\": blacked,\r\n                        \"status\": \"Downloaded\"\r\n                    },\r\n                    \"blacked\": {\r\n                        \"releaseId\": blacked,\r\n                        \"status\": \"Downloaded\"\r\n                    },\r\n                    \"blacked\": {\r\n                        \"releaseId\": blacked,\r\n                        \"status\": \"Downloaded\"\r\n                    },\r\n                    \"blacked\": {\r\n                        \"releaseId\": blacked,\r\n                        \"status\": \"Downloaded\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        \"cpu_temp\": 50,\r\n        \"cpu_usage\": 3,\r\n        \"memory_usage\": 484\r\n    }\r\n}\r\n```\r\nInternal data have been blacked.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1905/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1905/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1904",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1904/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1904/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1904/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1904",
    "id": 1173004220,
    "node_id": "I_kwDOAqHbmM5F6p-8",
    "number": 1904,
    "title": "User requests BALENA_DEVICE_NAME_AT_INIT service env var be automatically updated on deviceName change",
    "user": {
      "login": "cywang117",
      "id": 38748558,
      "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cywang117",
      "html_url": "https://github.com/cywang117",
      "followers_url": "https://api.github.com/users/cywang117/followers",
      "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
      "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
      "organizations_url": "https://api.github.com/users/cywang117/orgs",
      "repos_url": "https://api.github.com/users/cywang117/repos",
      "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cywang117/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 888495965,
        "node_id": "MDU6TGFiZWw4ODg0OTU5NjU=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/Low-hanging%20fruit",
        "name": "Low-hanging fruit",
        "color": "6a890b",
        "default": false,
        "description": "Easy to fix issue"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2022-03-17T22:54:05Z",
    "updated_at": "2022-03-21T14:06:28Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Currently, DEVICE_NAME_AT_INIT is equal to the value of `name` in the database's `config` table. This env var changes on recreating containers manually, but the containers do not automatically get recreated on device name change.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1904/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1902",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1902/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1902/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1902/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1902",
    "id": 1171320215,
    "node_id": "I_kwDOAqHbmM5F0O2X",
    "number": 1902,
    "title": "Supervisor patches device state with too large storage_usage value",
    "user": {
      "login": "fisehara",
      "id": 9320751,
      "node_id": "MDQ6VXNlcjkzMjA3NTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9320751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fisehara",
      "html_url": "https://github.com/fisehara",
      "followers_url": "https://api.github.com/users/fisehara/followers",
      "following_url": "https://api.github.com/users/fisehara/following{/other_user}",
      "gists_url": "https://api.github.com/users/fisehara/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fisehara/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fisehara/subscriptions",
      "organizations_url": "https://api.github.com/users/fisehara/orgs",
      "repos_url": "https://api.github.com/users/fisehara/repos",
      "events_url": "https://api.github.com/users/fisehara/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fisehara/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2022-03-16T17:18:44Z",
    "updated_at": "2022-03-17T13:59:59Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "We have recently recorded API issues when the supervisor patches \r\n`device/v2/<deviceUUID>/state` \r\nwith this request body:\r\n\r\n``` json\r\n{\r\n    \"dependent\": {\r\n        \"apps\": {}\r\n    },\r\n    \"local\": {\r\n        \"api_port\": 48484,\r\n        \"api_secret\": \"[Filtered]\",\r\n        \"apps\": {},\r\n        \"cpu_id\": \"obfuscated\",\r\n        \"cpu_temp\": 81,\r\n        \"cpu_usage\": 72,\r\n        \"ip_address\": \"obfuscated\",\r\n        \"is_on__commit\": \"obfuscated\",\r\n        \"is_undervolted\": False,\r\n        \"logs_channel\": None,\r\n        \"mac_address\": \"obfuscated\",\r\n        \"memory_total\": 962,\r\n        \"memory_usage\": 630,\r\n        \"os_variant\": \"prod\",\r\n        \"os_version\": \"balenaOS 2.73.1+rev1\",\r\n        \"provisioning_progress\": None,\r\n        \"provisioning_state\": \"\",\r\n        \"status\": \"Idle\",\r\n        \"storage_block_device\": \"/dev/mmcblk0\",\r\n        \"storage_total\": 27690,\r\n        \"storage_usage\": 17592186015302,\r\n        \"supervisor_version\": \"12.4.6\"\r\n    }\r\n}\r\n```\r\n\r\nThe value `\"storage_usage\": 17592186015302,` is a valid javascript integer 2^53-1 but not a valid int-32 2^31-1.\r\nMoreover, the storage_usage shouldn't be greater than storage_total.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1902/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1902/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1898",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1898/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1898/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1898/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1898",
    "id": 1168989900,
    "node_id": "I_kwDOAqHbmM5FrV7M",
    "number": 1898,
    "title": "e2e tests for regressions",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-03-14T22:46:53Z",
    "updated_at": "2022-04-19T00:01:00Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "List for regressions to try and get e2e testing to avoid from happening again:\r\n\r\nhttps://github.com/balena-os/balena-supervisor/issues/1895\r\nhttps://github.com/balena-os/balena-supervisor/pull/1901",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1898/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1898/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1896",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1896/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1896/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1896/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1896",
    "id": 1167341187,
    "node_id": "I_kwDOAqHbmM5FlDaD",
    "number": 1896,
    "title": "Device rolls back to previous supervisor and release on reboot",
    "user": {
      "login": "drewcovi",
      "id": 400278,
      "node_id": "MDQ6VXNlcjQwMDI3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/400278?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drewcovi",
      "html_url": "https://github.com/drewcovi",
      "followers_url": "https://api.github.com/users/drewcovi/followers",
      "following_url": "https://api.github.com/users/drewcovi/following{/other_user}",
      "gists_url": "https://api.github.com/users/drewcovi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drewcovi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drewcovi/subscriptions",
      "organizations_url": "https://api.github.com/users/drewcovi/orgs",
      "repos_url": "https://api.github.com/users/drewcovi/repos",
      "events_url": "https://api.github.com/users/drewcovi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drewcovi/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 12,
    "created_at": "2022-03-12T17:02:12Z",
    "updated_at": "2022-04-06T03:06:57Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I've never encountered this before, but it appears on every reboot, a device falls back to the previous release and previous supervisor version... any idea whats going on?\r\n\r\nBefore reboot:\r\n```\r\n{\r\n\"api port\": 48484,\r\n\"ip_address\": \"xxx.xxx.xxx.xxx\"\r\n\"os _version\": \"balenaOS 2.85.2+rev3\"\r\n\"mac_address\": \"DC:A6:32:DB:F4:86 4E: A6: FA:DD:2C: B9\"\r\n\"supervisor version\": \"12.11.37\"\r\n\"update pending\": false,\r\n\"update_failed\": false,\r\n\"update_downloaded\": false,\r\n\"commit\": \"88205a68af7d22987c5044bbcb9631eb2b&dc37e\"\r\n\"status\": \"Idle\"\r\n\"down load_progress\": null\r\n}\r\n```\r\nAfter reboot:\r\n\r\n\r\n```\r\n{\r\n  \"api_port\": 48484,\r\n  \"ip_address\": \"xxx.xxx.xxx.xxx\",\r\n  \"os_version\": \"balenaOS 2.85.2+rev3\",\r\n  \"mac_address\": \"DC:A6:32:DB:F4:86 6E:01:A1:7C:3D:BA\",\r\n  \"supervisor_version\": \"12.10.10\",\r\n  \"update_pending\": true,\r\n  \"update_failed\": false,\r\n  \"update_downloaded\": false,\r\n  \"status\": \"Idle\",\r\n  \"download_progress\": null\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1896/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1895",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1895/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1895/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1895/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1895",
    "id": 1167040949,
    "node_id": "I_kwDOAqHbmM5Fj6G1",
    "number": 1895,
    "title": "Supervisor does not start preloaded app when device is offline (> 12.11.19, < 12.11.38)",
    "user": {
      "login": "cywang117",
      "id": 38748558,
      "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cywang117",
      "html_url": "https://github.com/cywang117",
      "followers_url": "https://api.github.com/users/cywang117/followers",
      "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
      "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
      "organizations_url": "https://api.github.com/users/cywang117/orgs",
      "repos_url": "https://api.github.com/users/cywang117/repos",
      "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cywang117/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2022-03-12T00:09:08Z",
    "updated_at": "2022-03-15T18:26:50Z",
    "closed_at": "2022-03-14T23:06:54Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "The bug is that, when the device does not have internet connection on startup, the Supervisor will not start preloaded apps until it has been restarted. After Supervisor is restarted once, it will start up the preloaded app immediately. \r\n\r\nHowever, the Supervisor WILL rename `apps.json` -> `apps.json.preloaded` and will add the correct data to the `app` table of the database.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1895/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1895/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1894",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1894/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1894/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1894/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1894",
    "id": 1166242831,
    "node_id": "I_kwDOAqHbmM5Fg3QP",
    "number": 1894,
    "title": "Supervisor not starting on Intel NUC OS version 2022.01.0 when there is no internet connection",
    "user": {
      "login": "floion",
      "id": 12278197,
      "node_id": "MDQ6VXNlcjEyMjc4MTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12278197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/floion",
      "html_url": "https://github.com/floion",
      "followers_url": "https://api.github.com/users/floion/followers",
      "following_url": "https://api.github.com/users/floion/following{/other_user}",
      "gists_url": "https://api.github.com/users/floion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/floion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/floion/subscriptions",
      "organizations_url": "https://api.github.com/users/floion/orgs",
      "repos_url": "https://api.github.com/users/floion/repos",
      "events_url": "https://api.github.com/users/floion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/floion/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 401685504,
        "node_id": "MDU6TGFiZWw0MDE2ODU1MDQ=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/prio/high",
        "name": "prio/high",
        "color": "d93f0b",
        "default": false,
        "description": null
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2022-03-11T10:20:02Z",
    "updated_at": "2022-03-15T16:44:55Z",
    "closed_at": "2022-03-11T23:13:43Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Provisioned `2022.01.0` on Intel NUC without any networking. Then after 8-9 minutes plugged in eth so you can see from the uptime:\r\n\r\n```\r\nroot@5e358ec:~# uptime\r\n 20:57:17  up   0:09,  1 user,  load average: 0.36, 0.15, 0.07\r\n```\r\n\r\nOn the other hand, seems like supervisor just started when connectivity was established:\r\n\r\n```\r\nroot@5e358ec:~# balena ps\r\nCONTAINER ID        IMAGE                              COMMAND                  CREATED             STATUS                             PORTS               NAMES\r\n8f4283a6daf2        balena/amd64-supervisor:v12.11.0   \"/usr/src/app/entry.…\"   9 minutes ago       Up 22 seconds (health: starting)                       balena_supervisor\r\n```\r\n\r\nSimilar behavior (only worse even) when preloading with wifi connect. Seems like when preloading the supervisor container gets created when connectivity is established. So uptime is:\r\n\r\n```\r\nroot@277f099:~# uptime\r\n 15:48:07  up   0:40,  1 user,  load average: 0.05, 0.07, 0.02\r\n```\r\n\r\nbut `balena ps` shows creation and start time at about the time eth was plugged in:\r\n\r\n```\r\nroot@277f099:~# balena ps\r\nCONTAINER ID        IMAGE                              COMMAND                  CREATED              STATUS                             PORTS               NAMES\r\n100e0062ec54        e6f7e359f7dd                       \"/usr/bin/entry.sh b…\"   About a minute ago   Up 37 seconds                                          main_4667738_2099768_9eef49e6825669bdd8903b5545383987\r\n65992f59094a        balena/amd64-supervisor:v12.11.0   \"/usr/src/app/entry.…\"   About a minute ago   Up 26 seconds (health: starting)                       balena_supervisor\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1894/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1890",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1890/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1890/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1890/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1890",
    "id": 1148280644,
    "node_id": "I_kwDOAqHbmM5EcV9E",
    "number": 1890,
    "title": "Handle new default security-opts (balena-engine 20.10.x)",
    "user": {
      "login": "robertgzr",
      "id": 3930615,
      "node_id": "MDQ6VXNlcjM5MzA2MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3930615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robertgzr",
      "html_url": "https://github.com/robertgzr",
      "followers_url": "https://api.github.com/users/robertgzr/followers",
      "following_url": "https://api.github.com/users/robertgzr/following{/other_user}",
      "gists_url": "https://api.github.com/users/robertgzr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robertgzr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robertgzr/subscriptions",
      "organizations_url": "https://api.github.com/users/robertgzr/orgs",
      "repos_url": "https://api.github.com/users/robertgzr/repos",
      "events_url": "https://api.github.com/users/robertgzr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robertgzr/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2022-02-23T16:02:35Z",
    "updated_at": "2022-02-24T13:31:02Z",
    "closed_at": "2022-02-24T13:31:02Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "\r\n## v19.03.24\r\n```\r\nroot@balena:~# balena inspect balena_supervisor | grep -i security\r\n            \"SecurityOpt\": null,\r\n```\r\n## v20.10.12\r\n\r\n```\r\nbalena inspect balena_supervisor | jq '.[].HostConfig.SecurityOpt'\r\n[\r\n  \"label=disable\"\r\n]\r\n```\r\n\r\n\r\nConnects-to: https://github.com/balena-os/meta-balena/pull/2498\r\nInternal thread: https://www.flowdock.com/app/rulemotion/r-resinos/threads/qkzdgm9f6k8O0JLINsJvdif4BQB",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1890/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1889",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1889/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1889/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1889/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1889",
    "id": 1141979239,
    "node_id": "I_kwDOAqHbmM5EEThn",
    "number": 1889,
    "title": "move test/lib/helper.ts sleep function to src",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2022-02-17T22:21:50Z",
    "updated_at": "2022-03-02T02:00:10Z",
    "closed_at": "2022-03-02T02:00:10Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Src needs it more so move it there. Then make the tests use src/lib/sleep",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1889/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1887",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1887/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1887/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1887/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1887",
    "id": 1140225007,
    "node_id": "I_kwDOAqHbmM5D9nPv",
    "number": 1887,
    "title": "Updating the Supervisor corrupts the `supervisor.conf` file",
    "user": {
      "login": "Benedict-Carling",
      "id": 53439684,
      "node_id": "MDQ6VXNlcjUzNDM5Njg0",
      "avatar_url": "https://avatars.githubusercontent.com/u/53439684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Benedict-Carling",
      "html_url": "https://github.com/Benedict-Carling",
      "followers_url": "https://api.github.com/users/Benedict-Carling/followers",
      "following_url": "https://api.github.com/users/Benedict-Carling/following{/other_user}",
      "gists_url": "https://api.github.com/users/Benedict-Carling/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Benedict-Carling/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Benedict-Carling/subscriptions",
      "organizations_url": "https://api.github.com/users/Benedict-Carling/orgs",
      "repos_url": "https://api.github.com/users/Benedict-Carling/repos",
      "events_url": "https://api.github.com/users/Benedict-Carling/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Benedict-Carling/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 9,
    "created_at": "2022-02-16T15:46:13Z",
    "updated_at": "2022-03-09T18:50:33Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "### Description of Issue\r\n\r\nI added a new device to the balena fleet, it contained a balena-supervisor `v12.11.0`\r\n\r\nWhen I ran the command to check no files have been corrupted in the hostOS terminal. I received the following output.\r\n\r\n> Recommended here https://www.balena.io/docs/learn/more/masterclasses/device-debugging/#112-storage-media-corruption\r\n\r\n```script\r\nroot@#######:/# grep -v \"/var/cache/ldconfig/aux-cache\" /resinos.fingerprint | md5sum --quiet -c -\r\nroot@#######:/#\r\n```\r\nAfter marking the supervisor for an update to version `v12.11.34`, and rebooted, actuating the version bump.\r\n\r\nAnd then running the aforementioned command. I am returned the following error.\r\n\r\n```script\r\nroot@#######:~# grep -v \"/var/cache/ldconfig/aux-cache\" /balenaos.fingerprint | md5sum --quiet -c -\r\n/etc/balena-supervisor/supervisor.conf: FAILED\r\nmd5sum: WARNING: 1 computed checksum did NOT match\r\nroot@#######:~# \r\n```\r\n\r\n### Desired outcome\r\n\r\n1. When updating the supervisor the `balenaos.fingerprint` file has its md5sum for the `supervisor.conf` file updated. As so it is not labelled as corrupt with the command recommended in the device debugging masterclass.\r\n\r\n2. Or, Updating the device debugging masterclass recommended script to check for corrupt files to, exclude the `supervisor.conf` file.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1887/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1886",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1886/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1886/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1886/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1886",
    "id": 1139855872,
    "node_id": "I_kwDOAqHbmM5D8NIA",
    "number": 1886,
    "title": "Docs: Make it clearer how to use the force option on endpoints like POST /v1/reboot",
    "user": {
      "login": "jellyfish-bot",
      "id": 62708150,
      "node_id": "MDQ6VXNlcjYyNzA4MTUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/62708150?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jellyfish-bot",
      "html_url": "https://github.com/jellyfish-bot",
      "followers_url": "https://api.github.com/users/jellyfish-bot/followers",
      "following_url": "https://api.github.com/users/jellyfish-bot/following{/other_user}",
      "gists_url": "https://api.github.com/users/jellyfish-bot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jellyfish-bot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jellyfish-bot/subscriptions",
      "organizations_url": "https://api.github.com/users/jellyfish-bot/orgs",
      "repos_url": "https://api.github.com/users/jellyfish-bot/repos",
      "events_url": "https://api.github.com/users/jellyfish-bot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jellyfish-bot/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-02-16T10:56:14Z",
    "updated_at": "2022-02-16T10:56:33Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "[rahul-thakoor] undefined",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1886/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1886/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1875",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1875/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1875/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1875/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1875",
    "id": 1114570480,
    "node_id": "I_kwDOAqHbmM5Cbv7w",
    "number": 1875,
    "title": "Issue collection for `config-json.target` change in balenaOS 2.82.6",
    "user": {
      "login": "cywang117",
      "id": 38748558,
      "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cywang117",
      "html_url": "https://github.com/cywang117",
      "followers_url": "https://api.github.com/users/cywang117/followers",
      "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
      "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
      "organizations_url": "https://api.github.com/users/cywang117/orgs",
      "repos_url": "https://api.github.com/users/cywang117/repos",
      "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cywang117/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 888494217,
        "node_id": "MDU6TGFiZWw4ODg0OTQyMTc=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/High%20priority",
        "name": "High priority",
        "color": "d93f0b",
        "default": false,
        "description": "This issue has a high priority, and needs to be fixed ASAP"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2022-01-26T02:48:35Z",
    "updated_at": "2022-03-22T18:50:10Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "As of [balenaOS 2.82.6](https://github.com/balena-os/meta-balena/blob/master/CHANGELOG.md#v2826), with the addition of the config-json.target service, any config.json change will cause systemd to restart the following services:\r\n```\r\n# systemctl list-dependencies config-json.target\r\nconfig-json.target\r\n● ├─avahi-daemon.service\r\n● ├─balena-hostname.service\r\n● ├─balena-net-config.service\r\n● ├─balena-ntp-config.service\r\n● ├─development-features.service\r\n● ├─dnsmasq.service\r\n● ├─os-sshkeys.service\r\n● └─prepare-openvpn.service\r\n```\r\n\r\nBecause balenaEngine requires `development-features.service` as a dependency, this means balenaEngine is also restarted.\r\n\r\nBelow is a working list of any issues that are related to this OS change:\r\n- https://github.com/balena-os/balena-supervisor/issues/1876\r\n- https://github.com/balena-os/balena-supervisor/issues/1871",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1875/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1875/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1872",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1872/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1872/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1872/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1872",
    "id": 1113372943,
    "node_id": "I_kwDOAqHbmM5CXLkP",
    "number": 1872,
    "title": "Error setting boot config: Error: Splash image should be a base64 encoded PNG image",
    "user": {
      "login": "jellyfish-bot",
      "id": 62708150,
      "node_id": "MDQ6VXNlcjYyNzA4MTUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/62708150?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jellyfish-bot",
      "html_url": "https://github.com/jellyfish-bot",
      "followers_url": "https://api.github.com/users/jellyfish-bot/followers",
      "following_url": "https://api.github.com/users/jellyfish-bot/following{/other_user}",
      "gists_url": "https://api.github.com/users/jellyfish-bot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jellyfish-bot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jellyfish-bot/subscriptions",
      "organizations_url": "https://api.github.com/users/jellyfish-bot/orgs",
      "repos_url": "https://api.github.com/users/jellyfish-bot/repos",
      "events_url": "https://api.github.com/users/jellyfish-bot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jellyfish-bot/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2022-01-25T03:12:14Z",
    "updated_at": "2022-04-08T19:06:33Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "[cywang117] Device was erroring with `Error setting boot config: Error: Splash image should be a base64 encoded PNG image SplashImage.writeSplashImage`.\r\n\r\nUpon inspection of `/mnt/boot/splash`, `balena-logo-default.png` had a size of 0, which was the source of the error:\r\n```\r\nroot@d6cfa5f:/mnt/boot/splash# ls -al\r\ntotal 32\r\ndrwxr-xr-x 2 root root   512 Jan 19 19:07 .\r\ndrwxr-xr-x 7 root root  4096 Jan  1  1970 ..\r\n-rwxr-xr-x 1 root root 0 Jan 25 02:45 balena-logo-default.png\r\n-rwxr-xr-x 1 root root 13387 Jun 25  2019 balena-logo.png\r\n```\r\n\r\nThe device was setting some config.txt boot configs and this behavior was present on boot, it seems. There may be some operation going on related to the splash image backend that's not fully atomic.\r\n\r\nAdditional info:\r\nOS version: balenaOS 2.83.21+rev1\r\nSupervisor version: 12.11.28",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1872/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1871",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1871/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1871/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1871/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1871",
    "id": 1110478201,
    "node_id": "I_kwDOAqHbmM5CMI15",
    "number": 1871,
    "title": "Device does not restart when config variables are applied",
    "user": {
      "login": "rahul-thakoor",
      "id": 13220877,
      "node_id": "MDQ6VXNlcjEzMjIwODc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/13220877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rahul-thakoor",
      "html_url": "https://github.com/rahul-thakoor",
      "followers_url": "https://api.github.com/users/rahul-thakoor/followers",
      "following_url": "https://api.github.com/users/rahul-thakoor/following{/other_user}",
      "gists_url": "https://api.github.com/users/rahul-thakoor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rahul-thakoor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rahul-thakoor/subscriptions",
      "organizations_url": "https://api.github.com/users/rahul-thakoor/orgs",
      "repos_url": "https://api.github.com/users/rahul-thakoor/repos",
      "events_url": "https://api.github.com/users/rahul-thakoor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rahul-thakoor/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 888494217,
        "node_id": "MDU6TGFiZWw4ODg0OTQyMTc=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/High%20priority",
        "name": "High priority",
        "color": "d93f0b",
        "default": false,
        "description": "This issue has a high priority, and needs to be fixed ASAP"
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2022-01-21T13:35:22Z",
    "updated_at": "2022-03-18T13:32:55Z",
    "closed_at": "2022-03-18T13:32:55Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "When a device joins a fleet where there are fleet level configuration variables set, Supervisor reports success when applying configs with `Applied boot config: {}`. however the device is not rebooted. This became apparent in [balena-rpiplay](https://hub.balena.io/gh_rahul_thakoor/balena-rpiplay) openFleet where uses report that the app is not working as intended. Upon investigating I noticed that the app is crashlooping. This is because it requires `gpu_mem` to be > 64MB but given that the config is changed but the device was not rebooted, the actual config was not loaded. \r\n\r\n`vcgencmd get_mem gpu` report the default 16MB\r\n![image](https://user-images.githubusercontent.com/13220877/150535961-c6bc2b50-fe06-475b-a496-8ea29f5f3cc9.png)\r\n\r\n`cat /mnt/boot/config.txt` showing `gpu_mem=256`\r\n![image](https://user-images.githubusercontent.com/13220877/150536007-681828ff-9112-4ad7-9e58-0eee524ef8fd.png)\r\n\r\n\r\n\r\n\r\nI was able to reproduce this on newer balenaOS versions on Pi4 with `2.88.5+rev1-v12.11.0`\r\n\r\nBalenaOS `v2.75.0+rev1-v12.5.10` works fine.\r\n\r\n## How to reproduce\r\n\r\n- Create an fleet\r\n- Add fleet level configurations\r\n- Add a device to the fleet\r\n\r\n## What is expected\r\n\r\nDevice should reboot once configs are applied\r\n\r\n![image (10)](https://user-images.githubusercontent.com/13220877/150536798-c21f42ab-9eab-4d77-8cfc-823ce6515028.png)\r\n\r\n\r\n\r\n## What is actual behaviour?\r\n\r\nDevice does not reboot.\r\n\r\nFD thread: https://www.flowdock.com/app/rulemotion/balenalabs/threads/8X9OB8ehKewAXMolB6NUJv7e8q5",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1871/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1865",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1865/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1865/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1865/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1865",
    "id": 1095916913,
    "node_id": "I_kwDOAqHbmM5BUl1x",
    "number": 1865,
    "title": "delete-then-download doesn't delete container with contract violation before download new container",
    "user": {
      "login": "ClintHaerinck",
      "id": 7511320,
      "node_id": "MDQ6VXNlcjc1MTEzMjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7511320?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ClintHaerinck",
      "html_url": "https://github.com/ClintHaerinck",
      "followers_url": "https://api.github.com/users/ClintHaerinck/followers",
      "following_url": "https://api.github.com/users/ClintHaerinck/following{/other_user}",
      "gists_url": "https://api.github.com/users/ClintHaerinck/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ClintHaerinck/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ClintHaerinck/subscriptions",
      "organizations_url": "https://api.github.com/users/ClintHaerinck/orgs",
      "repos_url": "https://api.github.com/users/ClintHaerinck/repos",
      "events_url": "https://api.github.com/users/ClintHaerinck/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ClintHaerinck/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 15,
    "created_at": "2022-01-07T02:18:43Z",
    "updated_at": "2022-04-08T12:25:56Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "When for example doing an update between L4T versions of a service on a Jetson platform.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1865/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1865/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1806",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1806/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1806/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1806/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1806",
    "id": 1021011715,
    "node_id": "I_kwDOAqHbmM4822cD",
    "number": 1806,
    "title": "Error: (HTTP code 404) no such network - network supervisor0 not found",
    "user": {
      "login": "pdcastro",
      "id": 15091591,
      "node_id": "MDQ6VXNlcjE1MDkxNTkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/15091591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pdcastro",
      "html_url": "https://github.com/pdcastro",
      "followers_url": "https://api.github.com/users/pdcastro/followers",
      "following_url": "https://api.github.com/users/pdcastro/following{/other_user}",
      "gists_url": "https://api.github.com/users/pdcastro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pdcastro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pdcastro/subscriptions",
      "organizations_url": "https://api.github.com/users/pdcastro/orgs",
      "repos_url": "https://api.github.com/users/pdcastro/repos",
      "events_url": "https://api.github.com/users/pdcastro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pdcastro/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 9,
    "created_at": "2021-10-08T11:52:48Z",
    "updated_at": "2022-02-28T21:21:34Z",
    "closed_at": "2022-02-28T21:21:34Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Supervisor version 12.10.15:\r\n\r\n```\r\n[error]   Scheduling another update attempt in 900000ms due to failure:  Error: (HTTP code 404) no such network - network supervisor0 not found \r\n[error]         at /usr/src/app/dist/app.js:10:2333800\r\n[error]       at /usr/src/app/dist/app.js:10:2333732\r\n[error]       at Modem.buildPayload (/usr/src/app/dist/app.js:10:2333752)\r\n[error]       at IncomingMessage.<anonymous> (/usr/src/app/dist/app.js:10:2333005)\r\n[error]       at IncomingMessage.emit (events.js:322:22)\r\n[error]       at endReadableNT (_stream_readable.js:1187:12)\r\n[error]       at processTicksAndRejections (internal/process/task_queues.js:84:21)\r\n[error]   Device state apply error Error: (HTTP code 404) no such network - network supervisor0 not found \r\n[error]         at /usr/src/app/dist/app.js:10:2333800\r\n[error]       at /usr/src/app/dist/app.js:10:2333732\r\n[error]       at Modem.buildPayload (/usr/src/app/dist/app.js:10:2333752)\r\n[error]       at IncomingMessage.<anonymous> (/usr/src/app/dist/app.js:10:2333005)\r\n[error]       at IncomingMessage.emit (events.js:322:22)\r\n[error]       at endReadableNT (_stream_readable.js:1187:12)\r\n[error]       at processTicksAndRejections (internal/process/task_queues.js:84:21)\r\n```\r\n\r\nThe state was:\r\n\r\n* `ifconfig` showed that a `supervisor0` interface existed\r\n* `balena-engine network ls` showed that a `supervisor0` network did **not** exist\r\n* Restarting the supervisor would not fix it.\r\n\r\nThe following manual intervention \"fixed it\":\r\n\r\n```sh\r\n$ systemctl stop resin-supervisor\r\n$ ip link del supervisor0\r\n$ systemctl start resin-supervisor\r\n```\r\n\r\nThe `ip link del` command deletes the interface as listed by `ifconfig`.\r\n\r\nTentative conclusion: The `supervisor0` entity exists both as a system interface, as listed by `ifconfig`, and as a balenaEngine network, as listed by `balena-engine network ls`. The existence of the former prevents the supervisor from creating the latter. The solution would thus be for the supervisor to independently inspect and create both `supervisor0` entities.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1806/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1806/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1771",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1771/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1771/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1771/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1771",
    "id": 965294934,
    "node_id": "MDU6SXNzdWU5NjUyOTQ5MzQ=",
    "number": 1771,
    "title": "Supervisor stuck in a loop when using a preloaded image with splash screen that also has a fleet splash screen",
    "user": {
      "login": "tmigone",
      "id": 3076185,
      "node_id": "MDQ6VXNlcjMwNzYxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3076185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tmigone",
      "html_url": "https://github.com/tmigone",
      "followers_url": "https://api.github.com/users/tmigone/followers",
      "following_url": "https://api.github.com/users/tmigone/following{/other_user}",
      "gists_url": "https://api.github.com/users/tmigone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tmigone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tmigone/subscriptions",
      "organizations_url": "https://api.github.com/users/tmigone/orgs",
      "repos_url": "https://api.github.com/users/tmigone/repos",
      "events_url": "https://api.github.com/users/tmigone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tmigone/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2021-08-10T19:32:06Z",
    "updated_at": "2022-03-28T19:21:26Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "**Problem**\r\nIt appears that the supervisor enters into a loop applying boot config in the following scenario:\r\n\r\n- Fleet has a default boot splash screen\r\n- Provision a device that has been preloaded with a splash screen\r\n\r\nThis prevents the device from getting any updates as the supervisor is stuck trying to apply a state and never settles, looping with this message:\r\n\r\n```\r\nApplying boot config: {\"arm_64bit\":\"1\",\"dtoverlay\":[\"pi3-miniuart-bt\",\"pi3-disable-bt\"],\"enable_uart\":\"1\",\"lcd_rotate\":\"2 \",\"avoid_warnings\":\"1\",\"disable_splash\":\"1\",\"dtparam\":[\"i2c_arm=on\",\"spi=on\",\"audio=on\"],\"gpu_mem\":\"16\"}\r\nApplied boot config: {\"arm_64bit\":\"1\",\"dtoverlay\":[\"pi3-miniuart-bt\",\"pi3-disable-bt\"],\"enable_uart\":\"1\",\"lcd_rotate\":\"2 \",\"avoid_warnings\":\"1\",\"disable_splash\":\"1\",\"dtparam\":[\"i2c_arm=on\",\"spi=on\",\"audio=on\"],\"gpu_mem\":\"16\"}\r\nApplying boot config: {\"image\":\"data:image/png;base64,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[...]\r\nApplied boot config: {\"image\":\"data:image/png;base64,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[...]\r\n```\r\n\r\n**To replicate**\r\n\r\n1. Create a fleet\r\n2. Set a default splash screen for the fleet\r\n3. Provision a preloaded device using the CLI:\r\n\r\n```\r\nbalena os download raspberrypi4-64 --version 2.80.5+rev1 --output balena-raspberrypi4-image.img\r\nbalena config generate --version 2.80.5+rev1 --fleet g_tomas_migone1/audio --network ethernet --appUpdatePollInterval 10 -o base-config.json\r\nbalena os configure --fleet g_tomas_migone1/audio --config base-config.json --config-network=ethernet balena-raspberrypi4-image.img\r\nbalena preload balena-raspberrypi4-image.img --fleet g_tomas_migone1/audio --commit 9dcb00e3798d1eaf00ec70ec18bb407b --splash-image splash-logo.png\r\n```\r\n\r\nRemoving the fleet default splash image fixes the problem.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1771/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1771/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1758",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1758/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1758/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1758/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1758",
    "id": 953130969,
    "node_id": "MDU6SXNzdWU5NTMxMzA5Njk=",
    "number": 1758,
    "title": "Update locks created by the Supervisor not being removed",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 12,
    "created_at": "2021-07-26T17:34:48Z",
    "updated_at": "2022-05-02T09:07:21Z",
    "closed_at": "2022-04-12T19:25:22Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "I have seen at least twice now where a device is not updating its release because of update locks but after asking the user if they are using update locks they say no.\r\n\r\nWe know the Supervisor can create locks itself when apply updating to prevent other processes from changing state during the funnel so something is happening which causes those to exist. \r\n\r\nWhen does the Supervisor create lock files ?\r\nWhen does the Supervisor remove the lock files ?\r\nIs there any mechanism to mitigate being stuck from its own lock files ?",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1758/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1757",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1757/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1757/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1757/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1757",
    "id": 951814353,
    "node_id": "MDU6SXNzdWU5NTE4MTQzNTM=",
    "number": 1757,
    "title": "Update Supervisor to use Node 16",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2021-07-23T18:38:02Z",
    "updated_at": "2022-03-01T21:11:32Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Supervisor currently uses node 12 which will be EOL in 2022.\r\n\r\nIs it worth upgrading to 14 is that will also be EOL for maintenance just 1 more year later ?\r\n\r\nhttps://nodejs.org/en/about/releases/",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1757/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1754",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1754/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1754/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1754/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1754",
    "id": 950312831,
    "node_id": "MDU6SXNzdWU5NTAzMTI4MzE=",
    "number": 1754,
    "title": "Failed container SIGTERM + SIGKILL with `(HTTP code 409) unexpected - You cannot remove a running container`",
    "user": {
      "login": "cywang117",
      "id": 38748558,
      "node_id": "MDQ6VXNlcjM4NzQ4NTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38748558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cywang117",
      "html_url": "https://github.com/cywang117",
      "followers_url": "https://api.github.com/users/cywang117/followers",
      "following_url": "https://api.github.com/users/cywang117/following{/other_user}",
      "gists_url": "https://api.github.com/users/cywang117/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cywang117/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cywang117/subscriptions",
      "organizations_url": "https://api.github.com/users/cywang117/orgs",
      "repos_url": "https://api.github.com/users/cywang117/repos",
      "events_url": "https://api.github.com/users/cywang117/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cywang117/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 14,
    "created_at": "2021-07-22T05:26:10Z",
    "updated_at": "2022-04-04T19:56:58Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Currently, when executing a service kill step, the Supervisor throws any daemon HTTP codes that aren't 304 Not Modified (container already stopped) or 404 Not Found (container removed). See [here](https://github.com/balena-io/balena-supervisor/blob/4a2ac557ef11d334154bafa0cab4e7272cbed749/src/compose/service-manager.ts#L547-L560). There is a condition where the engine will fail on both the SIGTERM (`docker stop`) and the SIGKILL 10 seconds later (`docker kill`). \r\n\r\nWith this in mind, the Supervisor should force-terminate the old container so that the device isn't stuck in an invalid state of the Supervisor attempting to kill the container. Either that, or https://github.com/balena-os/balena-supervisor/issues/1743 would also avoid the invalid state by ensuring that the Supervisor wouldn't continue attempting to kill a container that doesn't want to be killed after a number of attempts and revert the state.\r\n\r\n**NOTE**: For support agents, to see if `kill -9` will have an effect, please follow the steps listed in one of my comments below to try to kill a container that refuses to stop.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1754/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1673",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1673/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1673/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1673/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1673",
    "id": 866341502,
    "node_id": "MDU6SXNzdWU4NjYzNDE1MDI=",
    "number": 1673,
    "title": "New CPU usage calculation causes cpu spikes only engine sees",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 9,
    "created_at": "2021-04-23T18:31:36Z",
    "updated_at": "2022-03-16T19:27:57Z",
    "closed_at": "2021-05-29T00:09:15Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "See https://github.com/balena-os/balena-supervisor/issues/1673#issuecomment-850010197 for explanation of what exactly is happening.\r\n\r\nWhen running v11.4.10 the usage reminds below 5% for over 600 samples but if you run 12.5.10 it goes up to 100%. When you check what process within the resin_supervisor container may be using up so much process, the only thing running is the supervisor node process which never goes above 10% either.\r\n\r\n`balena stats resin_supervisor` for sampling cpu usage\r\n`balena exec resin_supervisor top` for seeing processes running\r\n\r\n[supervisor_v11-4-10.log](https://github.com/balena-os/balena-supervisor/files/6367677/supervisor_v11-4-10.log) \r\n[supervisor_v12-0-0.log](https://github.com/balena-os/balena-supervisor/files/6367680/supervisor_v12-0-0.log) \r\n[supervisor_v12-5-0.log](https://github.com/balena-os/balena-supervisor/files/6367564/supervisor_v12-5-0.log) \r\n[supervisor_v12-5-7.log](https://github.com/balena-os/balena-supervisor/files/6367692/supervisor_v12-5-7.log) \r\n[supervisor_v12-5-8.log](https://github.com/balena-os/balena-supervisor/files/6367625/supervisor_v12-5-8.log)\r\n\r\nFrom the above logs sampling cpu usage over 600 times shows that the Supervisor is doing something new which causes large cpu spikes in v12.5.8. In that change we modified how the cpu usage is calculate for the dashboard (not the same as engine stats) which is probably the culprit https://github.com/balena-os/balena-supervisor/commit/204475d3dcbbb8a69b681d0348b39b5b486b628b.\r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1673/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1673/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1668",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1668/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1668/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1668/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1668",
    "id": 864208210,
    "node_id": "MDU6SXNzdWU4NjQyMDgyMTA=",
    "number": 1668,
    "title": "Evaluate container's restart policy and exit status before starting",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 1024940307,
        "node_id": "MDU6TGFiZWwxMDI0OTQwMzA3",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/Needs%20discussion",
        "name": "Needs discussion",
        "color": "4ed85b",
        "default": false,
        "description": "The fix for this needs to be discussed."
      }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 21,
    "created_at": "2021-04-21T19:41:13Z",
    "updated_at": "2022-04-20T19:39:45Z",
    "closed_at": "2022-04-20T19:39:45Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "If a container is stopped either from the dashboard (which uses the Supervisor API) or on device via the cli, the Supervisor should not start a stopped container just because the target state wants it running. The target state actually never changes the running state to stopped (there is no way to make it stopped) which makes respecting unless-stopped impossible for the current Supervisor behaviour.\r\n\r\nThe Supervisor behaves this way because it remembers which containers it has started so on subsequent target state polls, even though the running state wants the stopped container running, the Supervisor won't try to start it because it has already started it. This mechanism fails when the Supervisor is restarted and thus losing memory of the start.\r\n\r\nThis mechanism could be improved to evaluate the container it wants to start by noting the restart policy and exit code. For example, if the restart policy was unless-stopped and the exit code is 0 then we know the container was stopped by a user and we shouldn't start it again. Additionally, if the restart policy is no the exit code doesn't matter, etc for each policy. \r\n\r\ntl;dr how Supervisor will evaluate stopped containers:\r\n\r\n- unless-stopped: if exit code is 0 then start\r\n- always: exit code is irrelevant, always start\r\n- on-failure if exit code is 1 then start\r\n- no: exit code is irrelevant, never start\r\n\r\n\r\nhttps://docs.docker.com/config/containers/start-containers-automatically/#use-a-restart-policy",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1668/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1668/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1634",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1634/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1634/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1634/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1634",
    "id": 843385391,
    "node_id": "MDU6SXNzdWU4NDMzODUzOTE=",
    "number": 1634,
    "title": "Device gets stuck in download loop with error `port is already allocated`",
    "user": {
      "login": "gelbal",
      "id": 2027598,
      "node_id": "MDQ6VXNlcjIwMjc1OTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2027598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gelbal",
      "html_url": "https://github.com/gelbal",
      "followers_url": "https://api.github.com/users/gelbal/followers",
      "following_url": "https://api.github.com/users/gelbal/following{/other_user}",
      "gists_url": "https://api.github.com/users/gelbal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gelbal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gelbal/subscriptions",
      "organizations_url": "https://api.github.com/users/gelbal/orgs",
      "repos_url": "https://api.github.com/users/gelbal/repos",
      "events_url": "https://api.github.com/users/gelbal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gelbal/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 888495031,
        "node_id": "MDU6TGFiZWw4ODg0OTUwMzE=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/Low%20priority",
        "name": "Low priority",
        "color": "9193e0",
        "default": false,
        "description": ""
      },
      {
        "id": 995436402,
        "node_id": "MDU6TGFiZWw5OTU0MzY0MDI=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/area/compose-feature",
        "name": "area/compose-feature",
        "color": "06919e",
        "default": false,
        "description": "A feature which is part of the supported compose fields"
      },
      {
        "id": 1024940307,
        "node_id": "MDU6TGFiZWwxMDI0OTQwMzA3",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/Needs%20discussion",
        "name": "Needs discussion",
        "color": "4ed85b",
        "default": false,
        "description": "The fix for this needs to be discussed."
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2021-03-29T13:44:19Z",
    "updated_at": "2022-04-21T16:03:32Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "As a balena user, I would like my device not get stuck in download error loop when port is already allocated. \r\n\r\n----\r\nWhile on support, I saw the following logs in a device supervisor repeating:\r\n```\r\nMar 29 11:58:01 resin-supervisor[2814]: [error]   Updating failed, but there's another update scheduled immediately:  Error: Failed to apply state transition steps. (HTTP code 500) server error - driver failed programming external connectivity on endpoint localFeedForwarder_3408910_1734280 (edf02eb838e0e0f98c4a470051eb8a6c302ad2bfd1fc9c98a62c1ff5e76d19d4): Bind for 0.0.0.0:65505 failed: port is already allocated  Steps:[\"kill\",\"start\",\"fetch\",\"start\",\"fetch\"]\r\nMar 29 11:58:01 resin-supervisor[2814]: [error]         at fn (/usr/src/app/dist/app.js:6:8488)\r\nMar 29 11:58:01 resin-supervisor[2814]: [error]       at processTicksAndRejections (internal/process/task_queues.js:97:5)\r\nMar 29 11:58:01 resin-supervisor[2814]: [error]   Device state apply error Error: Failed to apply state transition steps. (HTTP code 500) server error - driver failed programming external connectivity on endpoint localFeedForwarder_3408910_1734280 (edf02eb838e0e0f98c4a470051eb8a6c302ad2bfd1fc9c98a62c1ff5e76d19d4): Bind for 0.0.0.0:65505 failed: port is already allocated  Steps:[\"kill\",\"start\",\"fetch\",\"start\",\"fetch\"]\r\nMar 29 11:58:01 resin-supervisor[2814]: [error]         at fn (/usr/src/app/dist/app.js:6:8488)\r\nMar 29 11:58:01 resin-supervisor[2814]: [error]       at processTicksAndRejections (internal/process/task_queues.js:97:5)\r\n```\r\n\r\nThis `port is already allocated` part led me to this knowledge base entry: https://jel.ly.fish/4dfdf053-e226-4ec2-8143-fbf54af81666\r\n\r\n----\r\n\r\nI'm opening an issue here in case my fellow supervisor mates could think of an improvement here. Could the supervisor be proactive to prevent the device got into such a state?",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1634/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1634/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1513",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1513/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1513/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1513/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1513",
    "id": 738597298,
    "node_id": "MDU6SXNzdWU3Mzg1OTcyOTg=",
    "number": 1513,
    "title": "Incorrect Delta Update.",
    "user": {
      "login": "splitice",
      "id": 468579,
      "node_id": "MDQ6VXNlcjQ2ODU3OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/468579?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/splitice",
      "html_url": "https://github.com/splitice",
      "followers_url": "https://api.github.com/users/splitice/followers",
      "following_url": "https://api.github.com/users/splitice/following{/other_user}",
      "gists_url": "https://api.github.com/users/splitice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/splitice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/splitice/subscriptions",
      "organizations_url": "https://api.github.com/users/splitice/orgs",
      "repos_url": "https://api.github.com/users/splitice/repos",
      "events_url": "https://api.github.com/users/splitice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/splitice/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2020-11-09T00:49:09Z",
    "updated_at": "2022-03-29T07:14:44Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "We have been seeing this issue for quite a while now, but it's so rare (approx 1/15-20 builds) that it's proven hard to debug.\r\n\r\nThe issue: The delta update for some releases can be missing files.\r\n\r\nThe directory on a full update hub:\r\n```\r\ntotal 2945\r\n   1 drwxr-xr-x 2 halley halley    1024 Nov  8 23:49 .\r\n   1 drwxr-xr-x 3 halley halley    1024 Nov  8 23:49 ..\r\n   1 -rw-r--r-- 1 halley halley      14 Nov  8 23:49 gateway.version\r\n1158 -rw-r--r-- 1 halley halley 1185289 Nov  8 10:07 gateway.zip\r\n   1 -rw-r--r-- 1 halley halley      14 Nov  8 23:49 nightlight.version\r\n 499 -rw-r--r-- 1 halley halley  510136 Nov  8 09:49 nightlight.zip\r\n   1 -rw-r--r-- 1 halley halley      14 Nov  8 23:49 process_manager.version\r\n 396 -rw-r--r-- 1 halley halley  404662 Nov  8 09:48 process_manager.zip\r\n   1 -rw-r--r-- 1 halley halley      14 Nov  8 23:49 processor.version\r\n 260 -rw-r--r-- 1 halley halley  265350 Nov  8 09:48 processor.zip\r\n   1 -rw-r--r-- 1 halley halley      14 Nov  8 23:49 wellness.version\r\n 625 -rw-r--r-- 1 halley halley  639960 Nov  8 10:41 wellness.zip\r\n```\r\n\r\nThe directory on a hub which received a delta update:\r\n```\r\ntotal 1823\r\n   2 drwxr-xr-x 1 halley halley    1024 Nov  9 00:27 .\r\n   2 drwxr-xr-x 1 halley halley    1024 Nov  8 23:49 ..\r\n   1 -rw-r--r-- 1 halley halley      14 Nov  8 23:49 gateway.version\r\n1158 -rw-r--r-- 1 halley halley 1185289 Nov  8 10:07 gateway.zip\r\n   1 -rw-r--r-- 1 halley halley      14 Nov  8 23:49 nightlight.version\r\n   1 -rw-r--r-- 1 halley halley      14 Nov  8 23:49 process_manager.version\r\n 396 -rw-r--r-- 1 halley halley  404662 Nov  8 09:48 process_manager.zip\r\n   1 -rw-r--r-- 1 halley halley      14 Nov  8 23:49 processor.version\r\n 260 -rw-r--r-- 1 halley halley  265350 Nov  8 09:48 processor.zip\r\n   1 -rw-r--r-- 1 halley halley      14 Nov  8 23:49 wellness.version\r\n```\r\n\r\nBefore update on the delta updated hub wellness.zip was matching the file that would habeen in the container. All the zip files in that directory changed with this release.\r\n\r\nWe use the balena ARMv7/v8 builders via balena push.\r\n\r\nWe have confirmed this on supervisor versions 11.5.1 and 10.6.23\r\n\r\nI am not certain if this is a supervisor issue.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1513/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1513/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1482",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1482/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1482/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1482/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1482",
    "id": 717480461,
    "node_id": "MDU6SXNzdWU3MTc0ODA0NjE=",
    "number": 1482,
    "title": "Modifications to firewall (iptables) always removed by Supervisor",
    "user": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 9,
    "created_at": "2020-10-08T16:10:59Z",
    "updated_at": "2022-04-22T22:23:20Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "The Supervisor has added firewall configuration functionality in v11.9.1 which applies rules based on a mode. If a user wants to apply their own iptable rules they would use `BALENA_HOST_FIREWALL_MODE=off` configuration variable however it has been reported and reproduced that this is not the behaviour.\r\n\r\nIf you set rules in iptable with your own service and have firewall mode set to off the Supervisor will override and remove your settings. We have created https://github.com/balena-io-playground/iptables-test which easily reproduces this behaviour.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1482/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1352",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1352/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1352/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1352/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1352",
    "id": 629774138,
    "node_id": "MDU6SXNzdWU2Mjk3NzQxMzg=",
    "number": 1352,
    "title": "Add ability to control host discoverability with a configuration variable",
    "user": {
      "login": "CameronDiver",
      "id": 7694128,
      "node_id": "MDQ6VXNlcjc2OTQxMjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7694128?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CameronDiver",
      "html_url": "https://github.com/CameronDiver",
      "followers_url": "https://api.github.com/users/CameronDiver/followers",
      "following_url": "https://api.github.com/users/CameronDiver/following{/other_user}",
      "gists_url": "https://api.github.com/users/CameronDiver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CameronDiver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CameronDiver/subscriptions",
      "organizations_url": "https://api.github.com/users/CameronDiver/orgs",
      "repos_url": "https://api.github.com/users/CameronDiver/repos",
      "events_url": "https://api.github.com/users/CameronDiver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CameronDiver/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 401685952,
        "node_id": "MDU6TGFiZWw0MDE2ODU5NTI=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/type/feature",
        "name": "type/feature",
        "color": "84b6eb",
        "default": false,
        "description": null
      },
      {
        "id": 2038934305,
        "node_id": "MDU6TGFiZWwyMDM4OTM0MzA1",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/area/host",
        "name": "area/host",
        "color": "e09214",
        "default": false,
        "description": "An issue with the interfacing with the host OS"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "20k-ultra",
      "id": 3946250,
      "node_id": "MDQ6VXNlcjM5NDYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/20k-ultra",
      "html_url": "https://github.com/20k-ultra",
      "followers_url": "https://api.github.com/users/20k-ultra/followers",
      "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
      "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
      "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
      "repos_url": "https://api.github.com/users/20k-ultra/repos",
      "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "20k-ultra",
        "id": 3946250,
        "node_id": "MDQ6VXNlcjM5NDYyNTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3946250?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/20k-ultra",
        "html_url": "https://github.com/20k-ultra",
        "followers_url": "https://api.github.com/users/20k-ultra/followers",
        "following_url": "https://api.github.com/users/20k-ultra/following{/other_user}",
        "gists_url": "https://api.github.com/users/20k-ultra/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/20k-ultra/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/20k-ultra/subscriptions",
        "organizations_url": "https://api.github.com/users/20k-ultra/orgs",
        "repos_url": "https://api.github.com/users/20k-ultra/repos",
        "events_url": "https://api.github.com/users/20k-ultra/events{/privacy}",
        "received_events_url": "https://api.github.com/users/20k-ultra/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "CameronDiver",
        "id": 7694128,
        "node_id": "MDQ6VXNlcjc2OTQxMjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7694128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CameronDiver",
        "html_url": "https://github.com/CameronDiver",
        "followers_url": "https://api.github.com/users/CameronDiver/followers",
        "following_url": "https://api.github.com/users/CameronDiver/following{/other_user}",
        "gists_url": "https://api.github.com/users/CameronDiver/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/CameronDiver/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/CameronDiver/subscriptions",
        "organizations_url": "https://api.github.com/users/CameronDiver/orgs",
        "repos_url": "https://api.github.com/users/CameronDiver/repos",
        "events_url": "https://api.github.com/users/CameronDiver/events{/privacy}",
        "received_events_url": "https://api.github.com/users/CameronDiver/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2020-06-03T07:48:18Z",
    "updated_at": "2022-04-09T18:12:49Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Using a `BALENA_HOST_DISCOVERABILITY` variable we should allow the user to toggle avahi on/off, with the default being on.",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1352/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1231",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1231/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1231/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1231/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/1231",
    "id": 590131422,
    "node_id": "MDU6SXNzdWU1OTAxMzE0MjI=",
    "number": 1231,
    "title": "Race condition between user containers and balena-engine api",
    "user": {
      "login": "robertgzr",
      "id": 3930615,
      "node_id": "MDQ6VXNlcjM5MzA2MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3930615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robertgzr",
      "html_url": "https://github.com/robertgzr",
      "followers_url": "https://api.github.com/users/robertgzr/followers",
      "following_url": "https://api.github.com/users/robertgzr/following{/other_user}",
      "gists_url": "https://api.github.com/users/robertgzr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robertgzr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robertgzr/subscriptions",
      "organizations_url": "https://api.github.com/users/robertgzr/orgs",
      "repos_url": "https://api.github.com/users/robertgzr/repos",
      "events_url": "https://api.github.com/users/robertgzr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robertgzr/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2020-03-30T09:23:04Z",
    "updated_at": "2022-04-28T13:28:39Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "... leads to `/var/run/balena.sock` being created as a directory on the host.\r\n\r\nThis can happen after the user containers have been created and started when we reboot the device/ restart balena-engine.\r\nThe engine brings up previously started containers and it's own API (including the socket) in parallel, leading to a race condition when the `--volume` flag was used for creating the containers.\r\n\r\nOne solution on the supervisor side would be to switch to the `--mount` notation (or it's equivalent in docker-compose) which does not auto-create the source of the bind mount as a directory if it is missing on the host.\r\n\r\nRelated: \r\n* https://github.com/balena-os/meta-balena/issues/1748\r\n* https://github.com/moby/moby/issues/30348",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1231/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/1231/timeline",
    "performed_via_github_app": null,
    "score": 1
  },
  {
    "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/841",
    "repository_url": "https://api.github.com/repos/balena-os/balena-supervisor",
    "labels_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/841/labels{/name}",
    "comments_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/841/comments",
    "events_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/841/events",
    "html_url": "https://github.com/balena-os/balena-supervisor/issues/841",
    "id": 389798902,
    "node_id": "MDU6SXNzdWUzODk3OTg5MDI=",
    "number": 841,
    "title": "(HTTP code 409) conflict - conflict: unable to delete (cannot be forced) - image is being used by running container",
    "user": {
      "login": "willswire",
      "id": 36860545,
      "node_id": "MDQ6VXNlcjM2ODYwNTQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/36860545?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/willswire",
      "html_url": "https://github.com/willswire",
      "followers_url": "https://api.github.com/users/willswire/followers",
      "following_url": "https://api.github.com/users/willswire/following{/other_user}",
      "gists_url": "https://api.github.com/users/willswire/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/willswire/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/willswire/subscriptions",
      "organizations_url": "https://api.github.com/users/willswire/orgs",
      "repos_url": "https://api.github.com/users/willswire/repos",
      "events_url": "https://api.github.com/users/willswire/events{/privacy}",
      "received_events_url": "https://api.github.com/users/willswire/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 401685774,
        "node_id": "MDU6TGFiZWw0MDE2ODU3NzQ=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/type/bug",
        "name": "type/bug",
        "color": "fca383",
        "default": false,
        "description": ""
      },
      {
        "id": 888494217,
        "node_id": "MDU6TGFiZWw4ODg0OTQyMTc=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/High%20priority",
        "name": "High priority",
        "color": "d93f0b",
        "default": false,
        "description": "This issue has a high priority, and needs to be fixed ASAP"
      },
      {
        "id": 888496311,
        "node_id": "MDU6TGFiZWw4ODg0OTYzMTE=",
        "url": "https://api.github.com/repos/balena-os/balena-supervisor/labels/Needs%20more%20investigation",
        "name": "Needs more investigation",
        "color": "ad4522",
        "default": false,
        "description": "More investigation is needed to find the cause or fix"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "CameronDiver",
      "id": 7694128,
      "node_id": "MDQ6VXNlcjc2OTQxMjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7694128?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CameronDiver",
      "html_url": "https://github.com/CameronDiver",
      "followers_url": "https://api.github.com/users/CameronDiver/followers",
      "following_url": "https://api.github.com/users/CameronDiver/following{/other_user}",
      "gists_url": "https://api.github.com/users/CameronDiver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CameronDiver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CameronDiver/subscriptions",
      "organizations_url": "https://api.github.com/users/CameronDiver/orgs",
      "repos_url": "https://api.github.com/users/CameronDiver/repos",
      "events_url": "https://api.github.com/users/CameronDiver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CameronDiver/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "CameronDiver",
        "id": 7694128,
        "node_id": "MDQ6VXNlcjc2OTQxMjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7694128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CameronDiver",
        "html_url": "https://github.com/CameronDiver",
        "followers_url": "https://api.github.com/users/CameronDiver/followers",
        "following_url": "https://api.github.com/users/CameronDiver/following{/other_user}",
        "gists_url": "https://api.github.com/users/CameronDiver/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/CameronDiver/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/CameronDiver/subscriptions",
        "organizations_url": "https://api.github.com/users/CameronDiver/orgs",
        "repos_url": "https://api.github.com/users/CameronDiver/repos",
        "events_url": "https://api.github.com/users/CameronDiver/events{/privacy}",
        "received_events_url": "https://api.github.com/users/CameronDiver/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "balena-ci",
        "id": 34882892,
        "node_id": "MDQ6VXNlcjM0ODgyODky",
        "avatar_url": "https://avatars.githubusercontent.com/u/34882892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/balena-ci",
        "html_url": "https://github.com/balena-ci",
        "followers_url": "https://api.github.com/users/balena-ci/followers",
        "following_url": "https://api.github.com/users/balena-ci/following{/other_user}",
        "gists_url": "https://api.github.com/users/balena-ci/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/balena-ci/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/balena-ci/subscriptions",
        "organizations_url": "https://api.github.com/users/balena-ci/orgs",
        "repos_url": "https://api.github.com/users/balena-ci/repos",
        "events_url": "https://api.github.com/users/balena-ci/events{/privacy}",
        "received_events_url": "https://api.github.com/users/balena-ci/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 12,
    "created_at": "2018-12-11T14:47:46Z",
    "updated_at": "2022-04-27T21:05:06Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "When implementing the **delete-then-download** application update strategy, devices are unable to remove the existing container due to the following error. Confirmed supervisor version running >= v2.5.1.\r\n\r\n`10.12.18 14:46:53 (-0500) Killing service 'main'`\r\n`10.12.18 14:46:53 (-0500) Deleting image`\r\n`10.12.18 14:46:53 (-0500) Failed to delete image due to '(HTTP code 409) conflict - conflict: unable to delete (cannot be forced) - image is being used by running container' `",
    "reactions": {
      "url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/841/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/balena-os/balena-supervisor/issues/841/timeline",
    "performed_via_github_app": null,
    "score": 1
  }
]